{"version":3,"sources":["Exploration.ts","InputBit.ts","OutputBit.ts","Adder.ts","Wire.ts","Gates.ts","AdderExploration.ts","RegisterBit.ts","Subtractor.ts","Clock.ts","Display.ts","ChoiceGate.ts","DividerExploration.ts","MultiplierExploration.ts","SubtractorExploration.ts","main.ts","../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.c39d6dcf.js","sourceRoot":"../src","sourcesContent":["// Exploration.ts\n//\n// This might be something a little more interesting\n\nimport Component, {StateObject} from './Component';\n\nclass Exploration {\n    public canvas: HTMLCanvasElement;\n    public context: CanvasRenderingContext2D;\n    public components: Array<Component>;\n    // The idea is that all components update their state recursively starting here\n    public outputComponents: Array<Component>;\n\n    public paused: boolean = false;\n    public updateTime: number = 1000;\n    public lastUpdated: number = Date.now();\n    public animationFrame: any;\n\n    // Can possibly have an afterRender property\n    public afterRender: (() => void) | null | undefined;\n\n    constructor(canvas: HTMLCanvasElement) {\n        this.canvas = canvas;\n        this.context = canvas.getContext('2d')!;\n        this.components = [];\n        this.outputComponents = [];\n\n        // default\n        canvas.width = canvas.height = 400;\n\n        // TS-safe way of putting a random debug name\n        let id = Math.floor(Math.random() * 1e6);\n        Object.defineProperty(window, \"exploration\" + id, {\n            value: this,\n        });\n        console.log(id, this);\n    }\n\n    // todo: addComponent() maybe?\n\n    render() {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        for (let i = 0; i < this.components.length; i++) {\n            this.context.save();\n            // render wires first\n            const comp = this.components[i];\n            for (let j = 0; j < comp.inputWires.length; j++) {\n                const position = {\n                    x: comp.position.x + comp.inputSockets[j].x,\n                    y: comp.position.y + comp.inputSockets[j].y,\n                };\n                comp.inputWires[j]?.render(this.context, position);\n            }\n            this.components[i].render(this.context);\n            this.context.restore();\n        }\n\n        if (typeof this.afterRender === \"function\") {\n            this.afterRender();\n        }\n    }\n\n    onClick(canvasX: number, canvasY: number) {\n        for (let i = 0; i < this.components.length; i++) {\n            const component = this.components[i];\n            const offsetX = canvasX - component.position.x;\n            const offsetY = canvasY - component.position.y;\n            if (Math.abs(offsetX) < component.size.x/2 && Math.abs(offsetY) < component.size.y/2) {\n                component.onClick(offsetX, offsetY);\n            }\n        }\n\n        // Right now I have nothing better than re-updating the whole tree\n        this.update();\n    }\n\n    pause() {\n        this.paused = true;\n        cancelAnimationFrame(this.animationFrame);\n    }\n\n    resume() {\n        this.paused = false;\n        this.animationFrame = requestAnimationFrame(this.updateLoop.bind(this));\n    }\n\n    updateLoop() {\n        // Not paused or turned off, and been long enough since last update\n        if (!this.paused && this.updateTime > 0 && Date.now() - this.lastUpdated > this.updateTime) {\n            this.update();\n        }\n        this.animationFrame = requestAnimationFrame(this.updateLoop.bind(this));\n    }\n\n    update() {\n        // call beforeUpdate if needed\n        for (let i = 0; i < this.components.length; i++) {\n            const comp = this.components[i];\n            if (typeof comp.beforeUpdate === \"function\") {\n                comp.beforeUpdate();\n            }\n        }\n\n        // Recursively loop backwards through the tree\n        // stores a hash of component indices because we have to check the same component multiple times\n        // We hash anything that is listed as an output component\n\n        const visitedNodes: {[i: number]: boolean} = {};\n        const savedState = [];\n        for (let i = 0; i < this.outputComponents.length; i++) {\n            const comp = this.outputComponents[i];\n            let old: boolean[] = [];\n            for (let j = 0; j < comp.state.bits.length; j++) {\n                old.push(comp.state.bits[j]);\n            }\n            savedState.push({bits: old});\n        }\n        for (let i = 0; i < this.outputComponents.length; i++) {\n            this.updateComponent(this.outputComponents[i], visitedNodes, savedState);\n        }\n\n        for (let i = 0; i < this.outputComponents.length; i++) {\n            //console.log(\"After Update: \", this.outputComponents[i].position, savedState[i].bits, this.outputComponents[i].state.bits)\n        }\n\n        //console.warn(\"UPDATE FINISHED\");\n\n        this.lastUpdated = Date.now();\n    }\n\n    updateComponent(component: Component,\n        visitedNodes: {[i: number]: boolean},\n        savedState: StateObject[]) {\n        let index = this.components.indexOf(component); // if this gets too slow I can add IDs\n        if (!visitedNodes[index]) {\n            visitedNodes[index] = true; // prevents infinite loops, although cyclic explorations are invalid anyway\n            // has not been visited, so we need to evaluate it\n            //console.log(\"visiting \" + String(index), component);\n            let parentBits = [];\n            for (let i = 0; i < component.inputWires.length; i++) {\n                const wire = component.inputWires[i];\n                if (wire) {\n                    const to = wire.toComponent;\n                    if (!to) {\n                        parentBits.push(false); // null = 0\n                    } else {\n                        this.updateComponent(wire.toComponent, visitedNodes, savedState);\n\n\n                        // all we need is this one bit\n                        // (note: null or missing wires give a 0)\n                        // did we save it?\n                        const ocIndex = this.outputComponents.indexOf(to);\n                        if (ocIndex >= 0) {\n                            //console.log(\"Using saved state\", ocIndex, savedState[ocIndex].bits);\n                            // Use the stored state instead of updating immediately\n                            parentBits.push(savedState[ocIndex].bits[wire.toOutput]);\n                        } else {\n                            parentBits.push(to.state.bits[wire.toOutput]);\n                        }\n                    }\n                } else {\n                    // no wire = 0\n                    parentBits.push(false);\n                }\n            }\n            // Update the component's state.\n            component.state.bits = component.evaluate(parentBits);\n        }\n    }\n};\n\nexport default Exploration;\n","// InputBit.ts\n// Can be clicked to change state\n\nimport Component from './Component';\n\nclass InputBit implements Component {\n    state: {bits: boolean[], active: boolean};\n    position: { x: number; y: number; };\n    size: { x: number; y: number; };\n    inputSockets: [];\n    inputWires: [];\n    outputSockets: {x: number, y: number}[];\n    beforeUpdate: undefined;\n\n    constructor(x: number, y: number, value: boolean = false, size: number = 20) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n        this.size = {\n            x: size,\n            y: size,\n        };\n\n        this.state = {\n            active: value,\n            bits: [value],\n        };\n\n        this.inputSockets = []; // it is input, it needs no input from elsewhere\n        this.inputWires = [];\n        this.outputSockets = [\n            {x: 0, y: 0}\n        ];\n    }\n    beforeUpdate: undefined;\n\n    render(ctx: CanvasRenderingContext2D) {\n        if (this.state.active !== this.state.bits[0]) {\n            // panic\n            throw new Error(\"[InputBit.render] State does not match bit array\");\n        }\n        ctx.fillStyle = (this.state.active ? \"#33ff33\" : \"#990000\");\n        ctx.strokeStyle = \"2px solid black\";\n        ctx.beginPath();\n        ctx.arc(this.position.x, this.position.y, this.size.x / 2, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.stroke();\n    };\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        console.log(\"[InputBit] clicked\");\n        this.state.active = !this.state.active;\n        this.state.bits[0] = this.state.active;\n        // bits will be updated when everything is\n    };\n\n    evaluate(_: boolean[]): boolean[] {\n        return [this.state.active];\n    }\n}\n\nexport default InputBit;\n","// OutputBit.ts\n// Need a good way to distinguish from InputBits\n\nimport Component from './Component';\nimport Wire from './Wire';\n\nclass OutputBit implements Component {\n    state: { bits: boolean[] };\n    position: { x: number; y: number; };\n    size: { x: number; y: number; };\n    inputSockets: { x: number; y: number; }[];\n    outputSockets: { x: number; y: number; }[];\n    inputWires: Wire[];\n    beforeUpdate: undefined;\n\n    constructor(x: number, y: number, size: number = 20) {\n        this.position = { x: x, y: y };\n        this.size = { x: size, y: size };\n        this.state = { bits: [false] };\n\n        this.inputSockets = [{x: 0, y: 0}];\n        // this might be convenient\n        this.outputSockets = [{x: 0, y: 0}];\n        this.inputWires = [];\n    }\n    render(ctx: CanvasRenderingContext2D): void {\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        ctx.fillStyle = \"black\";\n        ctx.fillRect(left, top, this.size.x, this.size.y);\n        ctx.fillStyle = (this.state.bits[0] ? \"#33ff33\" : \"#990000\");\n        ctx.fillRect(\n            left + this.size.x * 0.1,\n            top + this.size.y * 0.1,\n            this.size.x * 0.8,\n            this.size.y * 0.8\n        );\n    };\n    onClick(offsetX: number, offsetY: number): void {\n        return;\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        //console.log(bits);\n        //console.log(\"evaluating\", this.position);\n        return bits;\n    };\n}\n\nexport default OutputBit;\n","// Adder.ts\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass Adder implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    public numBits: number;\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, bits: number, width: number = bits*50, height: number = width/2) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: width,\n            y: height,\n        };\n\n        this.state = {\n            bits: [],\n        };\n\n        this.numBits = bits;\n\n        this.inputSockets = [];\n        // spacing between the bits\n        const spacing = width / (2 * bits);\n        for (let i = 0; i < bits; i++) {\n            this.inputSockets.push({\n                x: -spacing * (i + 0.5) + width/2,\n                y: -this.size.y/2,\n            });\n            this.inputSockets.unshift({\n                x: spacing * (i + 0.5) - width/2,\n                y: -this.size.y/2,\n            });\n        }\n\n        this.outputSockets = [];\n        for (let i = 0; i < bits; i++) {\n            this.outputSockets.push({\n                x: -spacing * (i - (bits-1)/2),\n                y: this.size.y/2,\n            });\n        }\n        // carry\n        this.outputSockets.push({\n            x: -this.size.x*0.375,\n            y: 0,\n        });\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.beginPath();\n        ctx.moveTo(left,                    top);\n        ctx.lineTo(left + this.size.x,      top);\n        ctx.lineTo(left + this.size.x*0.75, top + this.size.y);\n        ctx.lineTo(left + this.size.x*0.25, top + this.size.y);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        for (let i = 0; i < this.inputSockets.length; i++) {\n            let socket = this.inputSockets[i];\n            ctx.fillStyle = \"#3333cc\";\n            ctx.beginPath();\n            ctx.arc(this.position.x + socket.x, this.position.y + socket.y, 6, 0, 2*Math.PI);\n            ctx.fill();\n            ctx.fillStyle = \"black\";\n            ctx.fillText(String(i), this.position.x + socket.x, this.position.y + socket.y - 15);\n        }\n\n        for (let i = 0; i < this.outputSockets.length; i++) {\n            let socket = this.outputSockets[i];\n            ctx.fillStyle = \"#333333\";\n            ctx.strokeStyle = (this.state.bits[i] ? '#33ff33' : '#990000');\n            ctx.lineWidth = 2;\n            ctx.beginPath();\n            ctx.arc(this.position.x + socket.x, this.position.y + socket.y, 6, 0, 2*Math.PI);\n            ctx.fill();\n            ctx.stroke();\n        }\n\n        let num1 = 0, num2 = 0;\n        for (let i = 0; i < this.numBits; i++) {\n            const wire1 = this.inputWires[i], wire2 = this.inputWires[i + this.numBits];\n            num1 += (wire1.toComponent.state.bits[wire1.toOutput] ? 1 : 0) * (1 << i);\n            num2 += (wire2.toComponent.state.bits[wire2.toOutput] ? 1 : 0) * (1 << i);\n        }\n        const textSize = Math.round(Math.min(this.size.x * 0.125, this.size.y * 0.5));\n        ctx.font = textSize + \"px monospace\";\n        ctx.fillStyle = \"black\";\n        ctx.fillText(String(num1) + \" + \" + String(num2), this.position.x, this.position.y);\n\n        ctx.restore();\n    }\n\n    evaluate(bits: boolean[]): boolean[] {\n        let num1 = 0, num2 = 0;\n        // cheating here but that's not the point\n        for (let i = 0; i < this.numBits; i++) {\n            num1 += Number(bits[i]) * (1 << i);\n            num2 += Number(bits[i + this.numBits]) * (1 << i);\n        }\n\n        const answer = num1 + num2;\n        let answerBits = Array(this.numBits + 1);\n        for (let i = 0; i <= this.numBits; i++) {\n            answerBits[i] = (answer & (1 << i)) > 0;\n        }\n        //console.log(answerBits);\n        return answerBits;\n    }\n\n    beforeUpdate() {\n        // The simulation was having some bugs without this\n        this.state.bits = this.evaluate(this.inputWires.map(wire => (wire ? wire.get() : false)));\n    }\n}\n\nexport default Adder;\n","// Wire.ts\n\nimport Component from \"./Component\"\n\ntype WireOptions = {color?: string};\n\n// not sure a wire really is a component but it uses them\nclass Wire {\n    // I use \"from\" and \"to\" because \"input\" and \"output\" are ambiguous\n    toComponent: Component;\n    toOutput: number;\n\n    color: string;\n\n    // in case you want the wire to bend\n    waypoints: Array<{x: number, y: number}> = [];\n\n    constructor(\n        to: Component,\n        toOutput: number,\n        waypoints: {x: number, y: number}[] = [],\n        options: WireOptions = {}\n    ) {\n        this.toComponent = to;\n        this.toOutput = toOutput;\n        this.waypoints = waypoints;\n\n        this.color = options.color ?? \"#333\";\n    }\n\n    get(): boolean {\n        // empty wire is zero\n        if (!this.toComponent) return false;\n        // coerce undefined to false\n        return this.toComponent.state.bits[this.toOutput] || false;\n    }\n\n    addWaypoint(x: number, y: number) {\n        this.waypoints.push({x: x, y: y});\n    }\n\n    render(ctx: CanvasRenderingContext2D, from: {x: number, y: number}) {\n        if (!this.toComponent) return;\n        ctx.save();\n        ctx.strokeStyle = this.color;\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.moveTo(from.x, from.y);\n        for (let i = 0; i < this.waypoints.length; i++) {\n            ctx.lineTo(this.waypoints[i].x, this.waypoints[i].y);\n        }\n        const endOffset = this.toComponent.outputSockets[this.toOutput];\n        ctx.lineTo(endOffset.x + this.toComponent.position.x, endOffset.y + this.toComponent.position.y);\n        ctx.stroke();\n        ctx.restore();\n    }\n}\n\nexport default Wire;\n","// Gates.ts\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nabstract class Gate implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    public rotation: number;\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, size: number, rotation: number, bits: number) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: size,\n            y: size\n        };\n\n        this.state = {\n            bits: [false],\n        };\n\n        this.rotation = rotation * Math.PI / 180;\n\n        const cosine = Math.cos(this.rotation);\n        const sine = Math.sin(this.rotation);\n        // transform [0.3, -0.5]\n        if (bits == 2) {\n            this.inputSockets = [\n                {\n                    x: size * (-0.2*cosine + 0.5*sine),\n                    y: size * (-0.5*cosine - 0.2*sine),\n                },\n                {\n                    x: size * (0.2*cosine + 0.5*sine),\n                    y: size * (-0.5*cosine + 0.2*sine)\n                }\n            ];\n        } else {\n            this.inputSockets = [{\n                x: size * 0.5*sine,\n                y: size * -0.5*cosine,\n            }]\n        }\n\n        this.outputSockets = [\n            {\n                x: size * -0.4*sine,\n                y: size * 0.4*cosine,\n            }\n        ];\n\n        this.inputWires = [];\n    }\n    beforeUpdate: undefined;\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    abstract drawGate(ctx: CanvasRenderingContext2D): void;\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.strokeStyle = \"black\";\n        ctx.lineWidth = 2;\n        ctx.translate(this.position.x, this.position.y);\n        ctx.rotate(this.rotation);\n        // draw the wires coming in\n        ctx.beginPath();\n        if (this.inputSockets.length === 2) {\n            ctx.moveTo(this.size.x * -0.2, this.size.y * -0.5);\n            ctx.lineTo(this.size.x * -0.2, 0);\n            ctx.moveTo(this.size.x * 0.2, this.size.y * -0.5);\n            ctx.lineTo(this.size.x * 0.2, 0);\n            ctx.stroke();\n        }\n\n        this.drawGate(ctx);\n\n        ctx.restore();\n    }\n\n    abstract evaluate(bits: boolean[]): boolean[];\n}\n\nclass AndGate extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 2);\n    }\n    drawGate(ctx: CanvasRenderingContext2D) {\n        ctx.beginPath();\n        ctx.moveTo(this.size.x * 0.4, -this.size.y * 0.4);\n        ctx.lineTo(this.size.x * 0.4, 0);\n        ctx.arc(0, 0, this.size.x * 0.4, 0, Math.PI);\n        ctx.lineTo(-this.size.x * 0.4, -this.size.y * 0.4);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] && bits[1]];\n    };\n}\n\nclass OrGate extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 2);\n    }\n    drawGate(ctx: CanvasRenderingContext2D) {\n        const s = this.size.x;\n        ctx.beginPath();\n        ctx.moveTo(s * 0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0.4, s * 0.1, 0, s * 0.4);\n        ctx.quadraticCurveTo(s * -0.4, s * 0.1, s * -0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0, s * -0.2, s * 0.4, s * -0.4);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] || bits[1]];\n    };\n}\n\nclass XorGate extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 2);\n    }\n    drawGate(ctx: CanvasRenderingContext2D) {\n        const s = this.size.x;\n        // do the or's path...\n        ctx.beginPath();\n        ctx.moveTo(s * 0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0.4, s * 0.1, 0, s * 0.4);\n        ctx.quadraticCurveTo(s * -0.4, s * 0.1, s * -0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0, s * -0.2, s * 0.4, s * -0.4);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n        // and the extra thing\n        ctx.beginPath();\n        ctx.moveTo(s * -0.4, s * -0.5);\n        ctx.quadraticCurveTo(s * 0, s * -0.3, s * 0.4, s * -0.5);\n        ctx.stroke();\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] !== bits[1]];\n    };\n}\n// Doesn't extend Gate because it only has 1 input and is smaller\nclass Not extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 1);\n    }\n\n    drawGate(ctx: CanvasRenderingContext2D) {\n        const s = this.size.y;\n        // wire in\n        ctx.beginPath();\n        ctx.moveTo(0, s * -0.5);\n        ctx.lineTo(0, 0);\n        ctx.stroke();\n        // triangle for the not\n        ctx.beginPath();\n        ctx.moveTo(0, s * 0.2);\n        ctx.lineTo(s * -0.25, s * -0.35);\n        ctx.lineTo(s * 0.25, s * -0.35);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n\n        ctx.beginPath();\n        ctx.arc(0, s * 0.3, s * 0.1, 0, 2*Math.PI);\n        ctx.stroke();\n        ctx.fill();\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        Gate.prototype.render.call(this, ctx);\n    };\n    onClick(offsetX: number, offsetY: number) {};\n    evaluate(bits: boolean[]): boolean[] {\n        return [!bits[0]];\n    };\n}\n\nexport {AndGate, OrGate, XorGate, Not};\n","// AdderExploration.ts\n\nimport Exploration from './Exploration';\nimport InputBit from './InputBit';\nimport OutputBit from './OutputBit';\nimport Adder from './Adder';\nimport Wire from './Wire';\n\n// for testing\nimport {AndGate, OrGate, XorGate, Not} from './Gates';\n\nclass AdderExploration extends Exploration {\n    constructor(canvas: HTMLCanvasElement) {\n        super(canvas);\n\n        const adder = new Adder(200, 200, 4);\n        this.components.push(adder);\n\n        for (let i = 0; i < 4; i++) {\n            const bit = new InputBit(40 + i*40, 30);\n            adder.inputWires.unshift(new Wire(bit, 0, [\n                {x: 112.5 + i*25, y: 120 - i*20},\n                {x: 40 + i*40, y: 120 - i*20},\n            ]));\n            this.components.push(bit);\n\n            const bit2 = new InputBit(360 - i*40, 40);\n            adder.inputWires.push(new Wire(bit2, 0, []));\n            this.components.push(bit2);\n        }\n\n        for (let i = 0; i < 4; i++) {\n            const output = new OutputBit(245 - i*30, 300);\n            output.inputWires.push(new Wire(adder, i, []));\n            this.components.push(output);\n            this.outputComponents.push(output);\n        }\n\n        const andGate = new AndGate(365, 240, 60, 0);\n        const orGate = new OrGate(425, 240, 60, 0);\n        const xorGate = new XorGate(485, 240, 60, 0);\n        const not = new Not(545, 240, 60, 0);\n\n        this.components.push(andGate);\n        this.components.push(orGate);\n        this.components.push(xorGate);\n        this.components.push(not);\n\n        for (let i = 0; i < 7; i++) {\n            const bit = new InputBit(350 + i*30, 180);\n            this.components.push(bit);\n\n            if (i < 2) {\n                andGate.inputWires.push(new Wire(bit, 0, []));\n            } else if (i < 4) {\n                orGate.inputWires.push(new Wire(bit, 0, []));\n            } else if (i < 6) {\n                xorGate.inputWires.push(new Wire(bit, 0, []));\n            } else {\n                not.inputWires.push(new Wire(bit, 0, []));\n            }\n        }\n\n        const testGates = [andGate, orGate, xorGate, not];\n        for (let i = 0; i < 4; i++) {\n            const output = new OutputBit(365 + 60*i, 300);\n            this.components.push(output);\n            this.outputComponents.push(output);\n            output.inputWires.push(new Wire(testGates[i], 0, []));\n        }\n    }\n}\n\nexport default AdderExploration;\n","// RegisterBit.ts\n//\n// Has an \"on\" input and an \"off\" input.\n// Does nothing if both are on or both are off.\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass RegisterBit implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    beforeUpdate: undefined;\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, size: number = 30) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: size,\n            y: size,\n        };\n\n        this.state = {\n            bits: [false],\n        };\n\n        // [0] is the off switch and [1] is the on switch\n        const offset = size * 0.44;\n        this.inputSockets = [\n            {x: -offset, y: -offset},\n            {x:  offset, y: -offset}\n        ];\n\n        this.outputSockets = [\n            {x: 0, y: size/2},\n        ];\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        ctx.translate(left, top);\n        // base\n        ctx.fillStyle = this.state.bits[0] ? \"#33ff33\" : \"#990000\";\n        ctx.beginPath();\n        ctx.moveTo(this.size.x*0.5, 0);\n        ctx.lineTo(this.size.x*1.0, this.size.y*0.5);\n        ctx.lineTo(this.size.x*0.5, this.size.y);\n        ctx.lineTo(this.size.x*0.0, this.size.y*0.5);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        // red input\n        ctx.fillStyle = \"#ccffff\";\n        ctx.beginPath();\n        ctx.arc(this.size.x * 0.25, this.size.y * 0.25, this.size.x * 0.25, 135*Math.PI/180, 315*Math.PI/180);\n        ctx.fill();\n        ctx.stroke();\n        /*ctx.fillStyle = \"#33ff33\";\n        ctx.beginPath();\n        ctx.arc(this.size.x * 0.75, this.size.y * 0.25, this.size.x * 0.25, -135*Math.PI/180, 45*Math.PI/180);\n        ctx.fill();\n        ctx.stroke();*/\n        if (this.inputWires[0] && this.inputWires[0].get()) {\n            ctx.beginPath();\n            ctx.moveTo(this.size.x * 0.75, this.size.y * 0.25);\n            ctx.lineTo(this.size.x * 1.0, 0);\n            ctx.stroke();\n        }\n\n        ctx.restore();\n    }\n    // If the \"set\" input is on, change to the \"what\" input\n    evaluate(bits: boolean[]): boolean[] {\n        return bits[0] ? [bits[1]] : this.state.bits;\n    }\n}\n\nexport default RegisterBit;\n","// Adder.ts\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass Subtractor implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    public numBits: number;\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, bits: number, width: number = bits*50, height: number = width/2) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: width,\n            y: height,\n        };\n\n        this.state = {\n            bits: [],\n        };\n\n        this.numBits = bits;\n\n        this.inputSockets = [];\n        // spacing between the bits\n        const spacing = width / (2 * bits + 1);\n        for (let i = 0; i < bits; i++) {\n            this.inputSockets.push({\n                x: -spacing * (i + 0.5) + width/2,\n                y: -this.size.y/2,\n            });\n            this.inputSockets.unshift({\n                x: spacing * (i + 0.5) - width/2,\n                y: -this.size.y/2,\n            });\n        }\n\n        this.outputSockets = [];\n        for (let i = 0; i < bits; i++) {\n            this.outputSockets.push({\n                x: -spacing * (i - (bits-1)/2),\n                y: this.size.y/2,\n            });\n        }\n        // carry\n        this.outputSockets.push({\n            x: -this.size.x*0.375,\n            y: 0,\n        });\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.beginPath();\n        ctx.moveTo(left,                    top);\n        ctx.lineTo(left + this.size.x*0.46, top);\n        ctx.lineTo(left + this.size.x*0.5,  top + this.size.x*0.05);\n        ctx.lineTo(left + this.size.x*0.54, top);\n        ctx.lineTo(left + this.size.x,      top);\n        ctx.lineTo(left + this.size.x*0.75, top + this.size.y);\n        ctx.lineTo(left + this.size.x*0.25, top + this.size.y);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        for (let i = 0; i < this.inputSockets.length; i++) {\n            let socket = this.inputSockets[i];\n            ctx.fillStyle = \"#3333cc\";\n            ctx.beginPath();\n            ctx.arc(this.position.x + socket.x, this.position.y + socket.y, 6, 0, 2*Math.PI);\n            ctx.fill();\n            ctx.fillStyle = \"black\";\n            ctx.fillText(String(i), this.position.x + socket.x*0.95, this.position.y + socket.y + 10);\n        }\n\n        for (let i = 0; i < this.outputSockets.length; i++) {\n            let socket = this.outputSockets[i];\n            ctx.fillStyle = \"#333333\";\n            ctx.strokeStyle = (this.state.bits[i] ? '#33ff33' : '#990000');\n            ctx.lineWidth = 2;\n            ctx.beginPath();\n            ctx.arc(this.position.x + socket.x, this.position.y + socket.y, 6, 0, 2*Math.PI);\n            ctx.fill();\n            ctx.stroke();\n        }\n\n        let num1 = 0, num2 = 0;\n        for (let i = 0; i < this.numBits; i++) {\n            const wire1 = this.inputWires[i], wire2 = this.inputWires[i + this.numBits];\n            num1 += (wire1.toComponent.state.bits[wire1.toOutput] ? 1 : 0) * (1 << i);\n            num2 += (wire2.toComponent.state.bits[wire2.toOutput] ? 1 : 0) * (1 << i);\n        }\n        const textSize = Math.round(Math.min(this.size.x * 0.125, this.size.y * 0.5));\n        ctx.font = textSize + \"px monospace\";\n        ctx.fillStyle = \"black\";\n        ctx.fillText(String(num1) + \" - \" + String(num2), this.position.x, this.position.y);\n\n        ctx.restore();\n    }\n\n    evaluate(bits: boolean[]): boolean[] {\n        let num1 = 0, num2 = 0;\n        // cheating here but that's not the point\n        for (let i = 0; i < this.numBits; i++) {\n            num1 += Number(bits[i]) * (1 << i);\n            num2 += Number(bits[i + this.numBits]) * (1 << i);\n        }\n\n        const answer = num1 - num2;\n        let answerBits = Array(this.numBits + 1);\n        for (let i = 0; i <= this.numBits; i++) {\n            answerBits[i] = (answer & (1 << i)) != 0;\n        }\n        //console.log(answerBits);\n        return answerBits;\n    }\n\n    beforeUpdate() {\n        // The simulation was having some bugs without this\n        this.state.bits = this.evaluate(this.inputWires.map(wire => (wire ? wire.get() : false)));\n    }\n}\n\nexport default Subtractor;\n","// Clock.ts\n//\n// These clocks can have an arbitrary period.\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass ChoiceGate implements Component {\n    public state: {bits: boolean[], clock: number};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    public numBits: number;\n\n    //\n    constructor(x: number, y: number, bits: number, width: number = 100, height: number = 50) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: width,\n            y: height,\n        };\n        // because .fill() isn't supported?!\n        const bitArray: boolean[] = Array(bits).map(_ => false);\n        this.state = {\n            bits: bitArray,\n            clock: -1,\n        };\n        this.numBits = bits;\n        // \"power supply\" or more accurately a way to reset the clock\n        this.inputSockets = [\n            {x: 0, y: -this.size.y/2 - 1},\n        ];\n\n        this.outputSockets = [];\n        const spacing = width / bits;\n        for (let i = 0; i < bits; i++) {\n            this.outputSockets.push({\n                x: (i - bits/2 + 1/2) * spacing,\n                y: this.size.y/2,\n            });\n        }\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        ctx.translate(left, top);\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.beginPath();\n        let r = Math.min(this.size.y * 0.2, this.size.x * 0.1);\n        const w = this.size.x, h = this.size.y;\n        ctx.moveTo(w*0.5, 0);\n        ctx.arcTo(w*1.0, 0, w*1.0, h*0.5, r);\n        ctx.arcTo(w*1.0, h*1.0, w*0.5, h*1.0, r);\n        ctx.arcTo(0, h*1.0, 0, h*0.5, r);\n        ctx.arcTo(0, 0, w*0.5, 0, r);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        // power\n        ctx.translate(w/2, 0); // move origin to top-middle\n        ctx.beginPath();\n        ctx.moveTo(2, -5);\n        ctx.lineTo(2, -1);\n        ctx.lineTo(-2, -1);\n        ctx.lineTo(-2, -5);\n        ctx.stroke();\n\n        // clock\n        ctx.fillStyle = \"#e0e0e4\";\n        r = Math.min(w/3, h/3);\n        ctx.translate(0, h/2); // move origin to center\n        ctx.beginPath();\n        ctx.arc(0, 0, r, 0, 2*Math.PI);\n        ctx.fill();\n        ctx.stroke();\n\n        // ticks\n        ctx.save();\n        const angle = 2*Math.PI / this.numBits;\n        for (let i = 0; i < this.numBits; i++) {\n            ctx.beginPath();\n            ctx.moveTo(0, -r);\n            ctx.lineTo(0, -r * 0.8 + 1);\n            ctx.stroke();\n\n            ctx.rotate(angle);\n        }\n        ctx.restore();\n\n        // hand\n        ctx.save();\n        ctx.rotate(this.state.clock * angle);\n        ctx.lineWidth *= 3;\n        ctx.lineCap = \"round\";\n        ctx.beginPath();\n        ctx.moveTo(0, r*0.25);\n        ctx.lineTo(0, -r * 0.8);\n        ctx.stroke();\n        ctx.lineWidth *= 5/3;\n        ctx.beginPath();\n        ctx.arc(0, 0, 1, 0, 2*Math.PI);\n        ctx.stroke();\n        ctx.restore();\n\n        // outputs\n        for (let i = 0; i < this.outputSockets.length; i++) {\n            const socket = this.outputSockets[i];\n            ctx.fillStyle = (i == this.state.clock) ? \"#33ff33\" : \"#990000\";\n            ctx.beginPath();\n            ctx.arc(socket.x, socket.y, 5, 0, 2*Math.PI);\n            ctx.fill();\n            ctx.stroke();\n        }\n\n        ctx.restore();\n    }\n    // Evaluation: the clock's state is set on\n    evaluate(bits: boolean[]): boolean[] {\n        let result = [];\n        for (let i = 0; i < this.numBits; i++) {\n            result.push(i == this.state.clock);\n        }\n        return result;\n    }\n\n    beforeUpdate() {\n        if (this.inputWires[0]?.get()) {\n            this.state.clock = (this.state.clock + 1) % this.numBits;\n        } else {\n            this.state.clock = -1;\n        }\n    }\n}\n\nexport default ChoiceGate;\n","// Display.ts\n//\n// Given a set of bits, displays its value as a signed or unsigned integer.\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass Display implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    public signed: boolean;\n    public components: Component[];\n    beforeUpdate: undefined;\n\n    // bits=8 means an 8-bit plus 8-bit\n    // note that I'm thinking about using this for InputBits, OutputBits, and RegisterBits\n    // and those only have one state to get\n    constructor(x: number, y: number, components: Component[], signed: boolean = false, size: number = 30) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: size * 2,\n            y: size\n        };\n        this.signed = signed;\n        this.components = components;\n\n        this.state = {\n            // unused\n            bits: [],\n        };\n        // unused, it doesn't use wires because they make visual clutter\n        this.inputSockets = [];\n        this.outputSockets = [];\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.beginPath();\n        ctx.moveTo(left,               top);\n        ctx.lineTo(left + this.size.x, top);\n        ctx.lineTo(left + this.size.x, top + this.size.y);\n        ctx.lineTo(left,               top + this.size.y);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        // get the state\n        let totalValue = 0;\n        for (let i = 0; i < this.components.length; i++) {\n            const comp = this.components[i];\n            const value = (comp.state.bits[0] ? 1 : 0) << i;\n            // use 2's complement if signed on the last bit\n            totalValue += (this.signed && i == this.components.length-1) ? -value : value;\n        }\n\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.font = Math.round(this.size.y*4/5) + \"px monospace\";\n        ctx.fillStyle = \"#000\";\n        ctx.fillText(String(totalValue), this.position.x, this.position.y);\n\n        ctx.restore();\n    }\n\n    evaluate(bits: boolean[]): boolean[] {\n        return [];\n    }\n}\n\nexport default Display;\n","// RegisterBit.ts\n//\n// Has an \"on\" input and an \"off\" input.\n// Does nothing if both are on or both are off.\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass ChoiceGate implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: (Wire | null)[];\n    public outputSockets: {x: number, y: number}[];\n    beforeUpdate: undefined;\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, size: number = 30) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: size*2,\n            y: size,\n        };\n\n        this.state = {\n            bits: [false],\n        };\n        const offset = size * 0.5;\n        this.inputSockets = [\n            {x: -this.size.x * 1/3, y: 0},\n            {x: -offset, y: -this.size.y/2},\n            {x: +offset, y: -this.size.y/2}\n        ];\n\n        this.outputSockets = [\n            {x: 0, y: size/2},\n        ];\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        ctx.translate(left, top);\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.beginPath();\n        ctx.moveTo(0, 0);\n        ctx.lineTo(this.size.x*1.0, 0);\n        ctx.lineTo(this.size.x*0.67, this.size.y);\n        ctx.lineTo(this.size.x*0.33, this.size.y);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        // red input\n        const sx = this.size.x;\n        ctx.fillStyle = \"rgb(0, 204, 0, 0.75)\";\n        ctx.beginPath();\n        ctx.arc(sx*0.25, 1, sx*0.15, 0, Math.PI);\n        ctx.fill();\n        ctx.fillStyle = \"rgb(153, 0, 0, 0.75)\";\n        ctx.beginPath();\n        ctx.arc(sx*0.75, 1, sx*0.15, 0, Math.PI);\n        ctx.fill();\n\n        ctx.restore();\n    }\n    // If the \"set\" input is on, change to the \"what\" input\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] ? bits[1] : bits[2]];\n    }\n}\n\nexport default ChoiceGate;\n","// DividerExploration.ts\n\n/*\n\nsteps:\n1. Start with dividend (numerator) in RIGHT half of remainder register\n2. Shift the remainder left\n3. Send the LEFT half in for subtraction\n4. If the result is negative, write it, else keep the remainder as is\n5. Put the opposite of the sign bit on the new 1 position\n6. Go back to step 2, although when the larger clock strikes, record the results (I expect it to be 2*6+3 or 3*6+5 cycles).\n\nnext steps:\n- carry from the subtractor needs to enter the choice gates\n- on purple, we get the subtraction results, and if the sign bit is off, we insert it into the register\n- also on purple, that sign bit needs to shift the LEFT\n\nI think I need to totally reconfigure the remainder part\n\nRemainder register:\n- If power button is off, set to zero (6-12) or numerator (0-5)\n- If power button is on:\n    - on purple we may receive a subtraction, but this only applies to bits 6-12\n    - on green we need to shift left, setting a carry bit. (This will require an additional register.)\n\n\n\n*/\n\nimport Exploration from './Exploration';\nimport InputBit from './InputBit';\nimport OutputBit from './OutputBit';\nimport RegisterBit from './RegisterBit';\nimport Subtractor from './Subtractor';\nimport Wire from './Wire';\nimport Clock from './Clock';\nimport Display from './Display';\nimport {AndGate, OrGate, Not} from './Gates';\nimport ChoiceGate from './ChoiceGate';\n\nclass DividerExploration extends Exploration {\n    countdown: Clock;\n    remainderRight: number;\n    remainderSpacing: number;\n    startButton: InputBit;\n    numBits: number;\n\n    constructor(canvas: HTMLCanvasElement) {\n        super(canvas);\n        canvas.width = 800;\n        canvas.height = 600;\n\n        // A lot of the same stuff happens compared to Multiplier...\n\n        const BITS = 6;\n        this.numBits = BITS;\n\n        const startButton = new InputBit(695, 40, false, 50);\n        this.startButton = startButton;\n        const startNot = new Not(startButton.position.x - 50, 40, 30, 90);\n        startNot.inputWires.push(new Wire(startButton, 0));\n        this.components.push(startNot);\n\n        const clockX = 690;\n\n        const clockAnd = new AndGate(clockX, 100, 25, 0);\n        const clockNot = new Not(clockX, 150, 25, 0);\n        const clockBit = new OutputBit(clockX, 200);\n\n        clockAnd.inputWires.push(new Wire(clockNot, 0, [\n            {x: clockX - 5, y: 75},\n            {x: clockX - 20, y: 75},\n            {x: clockX - 20, y: 175},\n            {x: clockX, y: 175}\n        ]));\n        clockAnd.inputWires.push(new Wire(startButton, 0));\n        clockBit.inputWires.push(new Wire(clockNot, 0));\n        clockNot.inputWires.push(new Wire(clockAnd, 0));\n        this.components.push(clockAnd, clockNot, clockBit);\n        this.outputComponents.push(clockBit);\n\n        // ironic that I called the above a \"clock\"\n        // when the clock strikes 2*BITS + 4 it will end the operation\n        // but I add one more to avoid confusion\n        const countdown = new Clock(750, 230, 2*BITS + 4, 80, 50);\n        countdown.inputWires.push(new Wire(startButton, 0, [\n            {x: countdown.position.x, y: countdown.position.y - 40},\n            {x: countdown.position.x, y: 40},\n        ]));\n        this.countdown = countdown;\n\n        const subtractor = new Subtractor(210, 180, BITS, 260, 80);\n        //this.outputComponents.push(subtractor);\n\n        // Also not really a register.\n        let remainderRegister = [];\n        this.remainderRight = 680;\n        this.remainderSpacing = 52;\n        for (let i = 0; i < 2*BITS+1; i++) {\n            const reg = new OutputBit(this.remainderRight - this.remainderSpacing*i, 460, 20);\n            remainderRegister.push(reg);\n            this.outputComponents.unshift(reg); // todo: is needed?\n            this.components.push(reg);\n        }\n\n        // Wire Coloring\n        const purple = {color: \"rgb(128, 32, 128)\"};\n        const purpleFaded = {color: \"rgba(128, 0, 128, 0.25)\"};\n        const teal = {color: \"rgb(0, 128, 128)\"};\n        const tealFaded = {color: \"rgba(0, 128, 128, 0.35)\"};\n        const blue = {color: \"rgba(32, 64, 128, 0.8)\"};\n        const blueFaded = {color: \"rgba(32, 64, 128, 0.4)\"};\n        const yellow = {color: \"rgba(160, 160, 0)\"};\n\n        // Input Numbers (N/D). D = divisor, N = dividend\n        let inputN = [];\n        let inputD = [];\n        for (let i = 0; i < BITS; i++) {\n            const input = new InputBit(340 - i*25, 40);\n            this.components.push(input);\n            inputN.push(input); // in case we need it\n        }\n        for (let i = 0; i < BITS; i++) {\n            const input = new InputBit(340 - i*25, 110);\n            this.components.push(input);\n            inputD.push(input);\n        }\n\n        // Wires from the registers to the subtractor.\n        for (let i = 0; i < BITS; i++) {\n            const d = 3;\n            const bit = remainderRegister[i + BITS];\n            // basically, we want the most significant bit to be highest\n            const y1 = bit.position.y + 15 + d * (BITS - i);\n            const y2 = subtractor.position.y - 70;\n            subtractor.inputWires.push(new Wire(bit, 0, [\n                {x: subtractor.position.x + subtractor.inputSockets[i].x - 30 + d*i, y: y2 + d*i},\n                {x: 10 + d*i, y: y2 + d*i},\n                {x: 10 + d*i, y: y1},\n                {x: bit.position.x, y: y1},\n            ], {color: \"rgba(128, 0, 128, 0.75)\"}));\n        }\n        // The other subtractor registers (to the divisor)\n        for (let i = 0; i < BITS; i++) {\n            subtractor.inputWires.push(new Wire(inputD[i], 0));\n        }\n\n        // Choice Gates coming out of the subtractor (writes if subtracted).\n        let subtractorChoiceGates = [];\n        for (let i = 0; i < BITS; i++) {\n            const x = subtractor.position.x + subtractor.outputSockets[i].x;\n            const y = subtractor.position.y + subtractor.outputSockets[0].y; // put them all on the same line\n            // space them a bit\n            const choice = new ChoiceGate(remainderRegister[i+BITS].position.x, y + 50, 10);\n            // choice depends on whether or not the carry bit is positive or negative\n            choice.inputWires.push(new Wire(subtractor, BITS, [\n                {x: choice.position.x - 15, y: choice.position.y},\n                {x: choice.position.x - 15, y: choice.position.y - 20},\n                {x: subtractor.position.x - subtractor.size.x/2, y: choice.position.y - 20},\n                {x: subtractor.position.x - subtractor.size.x/2, y: subtractor.position.y},\n            ], {color: \"#888\"}));\n            // if negative, we just re-use the remainder register\n            const regBit = remainderRegister[i + BITS];\n            choice.inputWires.push(new Wire(regBit, 0, [\n                {x: choice.position.x + 5, y: choice.position.y - 10},\n                {x: choice.position.x + 20, y: choice.position.y - 10},\n                {x: choice.position.x + 20, y: regBit.position.y},\n            ], purple));\n            // otherwise we use the subtraction\n            choice.inputWires.push(new Wire(subtractor, i, [\n                {x: choice.position.x + 5, y: choice.position.y - 30},\n            ]));\n            subtractorChoiceGates.push(choice);\n            this.components.push(choice);\n        }\n\n        // Shifting the Remainder Register\n        // includes many wires\n        // also includes register for holding the quotient input\n        const fullRow = [];\n        for (let i = 0; i <= 2*BITS; i++) {\n            const regBit = remainderRegister[i];\n            /*const or = new OrGate(regBit.position.x, regBit.position.y - 30, 20, 0);\n            this.components.push(or);\n            regBit.inputWires.push(new Wire(or, 0));*/\n\n            // This is the middle (full) row\n            const choice = new ChoiceGate(regBit.position.x + (i < BITS ? 5 : -1), regBit.position.y - 100, 14);\n            // Selection Wire (from clock's NOT)\n            choice.inputWires.push(new Wire(clockAnd, 0, [\n                {x: choice.position.x - 18, y: choice.position.y},\n                {x: choice.position.x - 18, y: choice.position.y - 40},\n                {x: 580 - 2*i, y: choice.position.y - 50 - 1*i},\n            ], purpleFaded));\n            // Purple action\n            if (i >= BITS && i < 2*BITS) {\n                // Upper Half of the Register: Conditionally connect to the subtractor.\n                choice.inputWires.push(new Wire(subtractorChoiceGates[i - BITS], 0, [], purple));\n            } else {\n                // Lower Half of the Register: Connect to itself.\n                choice.inputWires.push(new Wire(regBit, 0, [\n                    {x: choice.position.x - 7, y: choice.position.y - 25},\n                    {x: regBit.position.x - 19, y: choice.position.y - 25},\n                    {x: regBit.position.x - 19, y: regBit.position.y},\n                ], purple));\n            }\n            // Shifting\n            if (i > 0) {\n                choice.inputWires.push(new Wire(remainderRegister[i-1], 0, [\n                    {x: choice.position.x + 7, y: choice.position.y - 25},\n                    {x: regBit.position.x + 26, y: choice.position.y - 25},\n                    {x: regBit.position.x + 26, y: regBit.position.y + 0},\n                ], teal));\n            } else {\n                const holdWrite = new OutputBit(choice.position.x + 30, choice.position.y - 25, 20);\n                const notY = subtractorChoiceGates[0].position.y - 20;\n                const not = new Not(500, notY, 30, -90);\n                not.inputWires.push(new Wire(subtractor, BITS, [\n                    {x: subtractor.position.x - subtractor.size.x/2, y: notY},\n                    {x: subtractor.position.x - subtractor.size.x/2, y: subtractor.position.y}\n                ], {color: \"#888\"}));\n                // set on green\n                //holdWrite.inputWires.push(new Wire(clockNot, 0, [], teal));\n                // value is negated result of subtraction\n                holdWrite.inputWires.push(new Wire(not, 0, [], teal));\n                // maybe?\n                //choice.inputWires[1] = new Wire(holdWrite, 0, [], purple);\n                choice.inputWires.push(new Wire(holdWrite, 0, [], teal));\n                this.components.push(not, holdWrite);\n                this.outputComponents.push(holdWrite);\n            }\n\n            this.components.push(choice);\n            fullRow.push(choice);\n        }\n\n        // Computing the Quotient\n\n        // The second input register that is actually a register.\n        /*let divisorRegister: RegisterBit[] = [];\n        let divisorRegisterChoice = [];\n        for (let i = 0; i < BITS; i++) {\n            const reg = new RegisterBit(inputD[i].position.x - 4, 150, 20);\n            subtractor.inputWires.push(new Wire(reg, 0));\n            divisorRegister.push(reg);\n            this.components.push(reg);\n            this.outputComponents.push(reg);\n        }\n        // Wiring Divisor (denominator) to the Registers\n        for (let i = 0; i < BITS; i++) {\n            const reg = divisorRegister[i];\n            const or = new OrGate(reg.position.x - 9, reg.position.y - 25, 20, 0);\n            const choice = new ChoiceGate(reg.position.x + 9, reg.position.y - 55, 12);\n            reg.inputWires.push(new Wire(or, 0), new Wire(choice, 0));\n\n            const wirePath = [\n                {x: reg.position.x - 13, y: choice.position.y},\n                {x: reg.position.x - 13, y: startNot.position.y},\n            ];\n            or.inputWires.push(new Wire(startNot, 0, wirePath, {color: \"rgba(100, 100, 130, 0.75)\"}));\n            or.inputWires.push(new Wire(clockNot, 0, [\n                {x: or.position.x + 10, y: or.position.y - 18 - i/2},\n                {x: clockNot.position.x - 40, y: or.position.y - 18 - i},\n            ], tealFaded));\n\n            // choice gate is [0] ? [1] : [2]\n            // the selection comes first\n            choice.inputWires.push(new Wire(startNot, 0, wirePath, {color: \"rgba(100, 100, 130, 0.75)\"}));\n\n            // If the clock is off, the registers need to use the input bits\n            choice.inputWires.push(new Wire(inputD[i], 0));\n            // Else, move up\n            choice.inputWires.push(new Wire(divisorRegister[i+1] || null, 0, [\n                {x: reg.position.x + 15, y: choice.position.y - 15},\n                {x: reg.position.x - 22, y: choice.position.y - 15},\n                {x: reg.position.x - 22, y: reg.position.y + 10},\n            ]));\n\n            this.components.push(or, choice);\n        }*/\n\n        // Wiring Dividend to seed the remainder register\n        // (blue wires)\n        let dividendChoice: ChoiceGate[] = [];\n        for (let i = 0; i < BITS; i++) {\n            const regBit = remainderRegister[i];\n            const inBit = inputN[i];\n\n            // This is the one close to the lowest 6 registers\n            const choice = new ChoiceGate(regBit.position.x + 3, regBit.position.y - 50, 12);\n            // Wire coming from the start button\n            choice.inputWires.push(new Wire(startButton, 0, [\n                {x: choice.position.x - 15, y: choice.position.y},\n                {x: choice.position.x - 15, y: choice.position.y + 15},\n                {x: 770, y: choice.position.y + 15},\n                {x: 770, y: countdown.position.y + 40},\n                {x: clockX - 30, y: countdown.position.y + 40},\n                {x: clockX - 30, y: startButton.position.y + (startButton.position.x - clockX + 30)},\n            ], blue));\n\n            // If power is on, make it come from the teal/purple stuff\n            choice.inputWires.push(new Wire(fullRow[i], 0));\n\n            // Otherwise, set it to the input\n            const d = 3;\n            const y1 = countdown.position.y + 50;\n            const y2 = inBit.position.y + 30;\n            choice.inputWires.push(new Wire(inBit, 0, [\n                {x: choice.position.x + 6, y: choice.position.y - 10 - d*i},\n                {x: 760 - d*i, y: choice.position.y - 10 - d*i},\n                {x: 760 - d*i, y: y1 + d*i},\n                {x: clockX - 40 - d*i, y: y1 + d*i},\n                {x: clockX - 40 - d*i, y: y2 + d*i},\n                {x: inBit.position.x, y: y2 + d*i},\n            ], blueFaded));\n\n            this.components.push(choice);\n            dividendChoice.push(choice);\n            regBit.inputWires.push(new Wire(choice, 0));\n        }\n\n        // Clearing the \"remainder\" (heh heh) of the register\n        // (blue wires)\n        for (let i = 0; i <= BITS; i++) {\n            const regBit = remainderRegister[i + BITS];\n            const and = new AndGate(regBit.position.x, regBit.position.y - 50, 24, 0);\n            // similar to above, use the full row if the power is on\n            and.inputWires.push(new Wire(fullRow[i+BITS], 0));\n            and.inputWires.push(new Wire(startButton, 0, [\n                {x: and.position.x + 5, y: and.position.y - 20},\n                {x: and.position.x + 13, y: and.position.y - 20},\n                {x: and.position.x + 13, y: and.position.y + 15},\n                {x: 770, y: and.position.y + 15},\n                {x: 770, y: countdown.position.y + 40},\n                {x: clockX - 30, y: countdown.position.y + 40},\n                {x: clockX - 30, y: startButton.position.y + (startButton.position.x - clockX + 30)},\n            ], blue));\n\n            this.components.push(and);\n            regBit.inputWires.push(new Wire(and, 0));\n        }\n\n        // Control Wire from the final register bit to the subtractor's output\n        /*const regLSB = divisorRegister[0];\n        for (let i = 0; i <= BITS; i++) {\n            const choice = subtractorChoiceGates[i];\n            // Selector Wire\n            choice.inputWires.unshift(new Wire(regLSB, 0, [\n                {x: choice.position.x - 13, y: choice.position.y},\n                {x: choice.position.x - 13, y: choice.position.y - 20},\n                {x: 282, y: choice.position.y - 20},\n                {x: 282, y: regLSB.position.y + 20},\n                {x: regLSB.position.x, y: regLSB.position.y + 20},\n            ], {color: \"rgb(127, 127, 127)\"}));\n            choice.inputWires.unshift(null);\n\n            // Else wire\n            const outBit = remainderRegister[i + BITS];\n            choice.inputWires.push(new Wire(outBit, 0, [\n                {x: choice.position.x + 5, y: choice.position.y - 10},\n                {x: outBit.position.x + 19, y: choice.position.y - 10},\n                {x: outBit.position.x + 19, y: outBit.position.y - 19},\n            ], purpleFaded));\n        }*/\n\n        // Answer Register\n        const finalAnswer: RegisterBit[] = [];\n        for (let i = 0; i < 2*BITS; i++) {\n            const offset = (i < BITS ? 5 : -10);\n            const from = remainderRegister[i + (i >= BITS ? 1 : 0)];\n            const bit = new RegisterBit(from.position.x + offset, 580, 25);\n            this.components.push(bit);\n            this.outputComponents.push(bit);\n\n            // set wire: on at the 14th clock cycle\n            bit.inputWires.push(new Wire(countdown, 14, [\n                {x: bit.position.x - 15, y: bit.position.y - 15},\n                {x: bit.position.x - 15, y: bit.position.y - 30},\n                {x: 790, y: bit.position.y - 30},\n                {x: 790, y: countdown.position.y + 40},\n                {x: countdown.position.x + countdown.outputSockets[14].x, y: countdown.position.y + 40},\n            ], {color: \"rgb(128, 128, 128)\"}));\n\n            // what wire: from the corresponding from the product \"register\"\n            const diagonal = 15;\n            bit.inputWires.push(new Wire(from, 0, [\n                {x: bit.position.x + diagonal, y: bit.position.y - diagonal},\n                {x: from.position.x + diagonal + offset, y: from.position.y + diagonal + offset},\n            ]));\n\n            finalAnswer.push(bit);\n        }\n\n        // finally, add displays\n        const displayN = new Display(inputN[0].position.x + 50, inputN[0].position.y, inputN, false, 30);\n        const displayD = new Display(inputD[0].position.x + 50, inputD[0].position.y, inputD, false, 30);\n        const displayQ = new Display(557, 540, finalAnswer.slice(0, BITS), false, 30);\n        const displayR = new Display(200, 540, finalAnswer.slice(BITS, 2*BITS), false, 30);\n\n        // rendering trick, because input wires are drawn with a component\n        // so pushing these last makes them render last so it looks cleaner\n        this.components.push(subtractor, countdown, startButton, displayN, displayD, displayQ, displayR);\n    }\n\n    drawRemainderGuide(left: number, right: number, color: string, text: string) {\n        const ctx = this.context;\n        const x1 = (this.remainderRight - left*this.remainderSpacing) - 15;\n        const x2 = (this.remainderRight - right*this.remainderSpacing) + 15;\n        const y = 480;\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = \"none\";\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 4;\n        ctx.beginPath();\n        ctx.moveTo(x1, y);\n        ctx.lineTo(x1 + 10, y + 10);\n        ctx.lineTo(x2 - 10, y + 10);\n        ctx.lineTo(x2, y);\n        ctx.stroke();\n\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.33)\";\n        ctx.fillStyle = color;\n        ctx.font = \"30px monospace\";\n        ctx.strokeText(text, (x1 + x2)/2, y + 25);\n        ctx.fillText(text, (x1 + x2)/2, y + 25);\n    }\n\n    afterRender = () => {\n        // display the quotient\n        const ctx = this.context;\n        ctx.save();\n\n        // get the clock cycle\n        const cycle = this.countdown.state.clock;\n        if (cycle >= 0 && cycle < 2*this.numBits+3) {\n            const n = (cycle+1) >> 1;\n            this.drawRemainderGuide(n + 5, n + 0, \"#33c\", \"Remainder\");\n\n            if (n > 1) {\n                this.drawRemainderGuide(n-2, Math.max(n-7, 0), \"#990\", \"Quotient\");\n            }\n        }\n\n        ctx.restore();\n\n        // not sure where to put this\n        if (cycle == 2 * this.numBits + 3) {\n            this.startButton.state.active = false;\n            this.startButton.state.bits = [false];\n        }\n    }\n}\n\nexport default DividerExploration;\n","// MultiplierExploration.ts\n\nimport Exploration from './Exploration';\nimport InputBit from './InputBit';\nimport OutputBit from './OutputBit';\nimport RegisterBit from './RegisterBit';\nimport Adder from './Adder';\nimport Wire from './Wire';\nimport Clock from './Clock';\nimport Display from './Display';\nimport {AndGate, OrGate, Not} from './Gates';\nimport ChoiceGate from './ChoiceGate';\n\nclass MultiplierExploration extends Exploration {\n    countdown: Clock;\n    regSpacing: number;\n    regRight: number;\n    numBits: number;\n    startButton: InputBit;\n\n    constructor(canvas: HTMLCanvasElement) {\n        super(canvas);\n        canvas.width = 800;\n        canvas.height = 600;\n\n        const BITS = 6;\n        this.numBits = BITS;\n\n        const startButton = new InputBit(760, 40, false, 50);\n        this.startButton = startButton;\n        const startNot = new Not(680, 40, 30, 90);\n        startNot.inputWires.push(new Wire(startButton, 0));\n        this.components.push(startNot);\n\n        const clockX = 755;\n\n        const clockAnd = new AndGate(clockX, 100, 25, 0);\n        const clockNot = new Not(clockX, 150, 25, 0);\n        const clockBit = new OutputBit(clockX, 200);\n\n        clockAnd.inputWires.push(new Wire(clockNot, 0, [\n            {x: clockX - 5, y: 75},\n            {x: clockX - 20, y: 75},\n            {x: clockX - 20, y: 175},\n            {x: clockX, y: 175}\n        ]));\n        clockAnd.inputWires.push(new Wire(startButton, 0));\n        clockBit.inputWires.push(new Wire(clockNot, 0));\n        clockNot.inputWires.push(new Wire(clockAnd, 0));\n        this.components.push(clockAnd, clockNot, clockBit);\n        this.outputComponents.push(clockBit);\n\n        // ironic that I called the above a \"clock\"\n        // when the clock strikes 2*BITS + 1 it will end the operation\n        const countdown = new Clock(730, 260, 14, 80, 50);\n        countdown.inputWires.push(new Wire(startButton, 0, [\n            {x: countdown.position.x, y: countdown.position.y - 40},\n            {x: 705, y: countdown.position.y - 40},\n            {x: 705, y: 40},\n        ]));\n        this.countdown = countdown;\n\n        const adder = new Adder(180, 190, BITS, 270, 90);\n        //this.outputComponents.push(adder);\n\n        // The \"Register\" that really isn't.\n        // The Add and Shift steps should be successfully separated...\n        let productRegister = [];\n        this.regRight = 730;\n        this.regSpacing = 55;\n        for (let i = 0; i < 2*BITS+1; i++) {\n            const reg = new OutputBit(this.regRight - this.regSpacing*i, 430, 20);\n            productRegister.push(reg);\n            this.outputComponents.unshift(reg); // todo: is needed?\n            this.components.push(reg);\n        }\n\n        // Wire Coloring\n        const purple = {color: \"rgb(128, 32, 128)\"};\n        const purpleFaded = {color: \"rgba(128, 0, 128, 0.4)\"};\n        const teal = {color: \"rgb(0, 128, 128)\"};\n        const tealFaded = {color: \"rgba(0, 128, 128, 0.35)\"};\n\n        // Wires from the registers to the adder.\n        for (let i = 0; i < BITS; i++) {\n            const d = 3;\n            const bit = productRegister[i + BITS];\n            // basically, we want the most significant bit to be highest\n            const y1 = bit.position.y + 15 + d * (BITS - i);\n            adder.inputWires.push(new Wire(bit, 0, [\n                {x: adder.position.x + adder.inputSockets[i].x, y: 110 + d*i},\n                {x: 10 + d*i, y: 110 + d*i},\n                {x: 10 + d*i, y: y1},\n                {x: bit.position.x, y: y1},\n            ], {color: \"rgba(128, 0, 128, 0.75)\"}));\n        }\n\n        // And Gates coming out of the adder (for the clock).\n        let adderChoiceGates = [];\n        for (let i = 0; i <= BITS; i++) {\n            // and gate\n            //const x = adder.position.x + adder.outputSockets[i].x;\n            const y = adder.position.y + adder.outputSockets[0].y; // put them all on the same line\n            // space them a bit\n            const choice = new ChoiceGate(productRegister[i+BITS].position.x + 7, y + 50, 10);\n            // this will be input 0 temporarily but we will unshift later\n            choice.inputWires.push(new Wire(adder, i));\n            adderChoiceGates.push(choice);\n            this.components.push(choice);\n        }\n\n        // Shifting the Multiplication Register\n        for (let i = 0; i < 2*BITS + 1; i++) {\n            const regBit = productRegister[i];\n            /*const or = new OrGate(regBit.position.x, regBit.position.y - 30, 20, 0);\n            this.components.push(or);\n            regBit.inputWires.push(new Wire(or, 0));*/\n\n            const choice = new ChoiceGate(regBit.position.x, regBit.position.y - 60, 14);\n            // Selection Wire (from clock's NOT)\n            choice.inputWires.push(new Wire(clockNot, 0, [\n                {x: choice.position.x - 18, y: choice.position.y},\n                {x: choice.position.x - 18, y: choice.position.y - 24},\n                {x: 630 - 2*i, y: choice.position.y - 60 - i},\n            ], tealFaded));\n            // Shifting\n            if (i < 2*BITS) {\n                choice.inputWires.push(new Wire(productRegister[i+1], 0, [\n                    {x: regBit.position.x - 7, y: choice.position.y - 20},\n                    {x: regBit.position.x - 24, y: choice.position.y - 20},\n                    {x: regBit.position.x - 24, y: regBit.position.y},\n                ], teal));\n            } else {\n                choice.inputWires.push(null);\n            }\n            if (i >= BITS) {\n                // Upper Half of the Register: Conditionally connect to the adder.\n                choice.inputWires.push(new Wire(adderChoiceGates[i - BITS], 0, [], purple));\n            } else {\n                // Lower Half of the Register: Connect to itself.\n                choice.inputWires.push(new Wire(regBit, 0, [\n                    {x: regBit.position.x + 7, y: choice.position.y - 20},\n                    {x: regBit.position.x + 20, y: choice.position.y - 20},\n                    {x: regBit.position.x + 20, y: regBit.position.y},\n                ], purple));\n            }\n\n            this.components.push(choice);\n            regBit.inputWires.push(new Wire(choice, 0));\n        }\n\n        // Input Numbers (A and B).\n        let inputA = [];\n        let inputB = [];\n        for (let i = 0; i < BITS; i++) {\n            const input = new InputBit(320 - i*30, 60, false, 25);\n            this.components.push(input);\n            adder.inputWires.push(new Wire(input, 0));\n            inputA.push(input); // in case we need it\n        }\n        for (let i = 0; i < BITS; i++) {\n            const input = new InputBit(630 - i*50, 60, false, 25);\n            this.components.push(input);\n            inputB.push(input);\n        }\n\n        // The second input register that is actually a register.\n        let multiplierRegister: RegisterBit[] = [];\n        let multiplierRegisterChoice = [];\n        for (let i = 0; i < BITS; i++) {\n            const reg = new RegisterBit(inputB[i].position.x - 4, 170, 20);\n            multiplierRegister.push(reg);\n            this.components.push(reg);\n            this.outputComponents.push(reg);\n        }\n        // Wiring to the Registers\n        for (let i = 0; i < BITS; i++) {\n            const reg = multiplierRegister[i];\n            const or = new OrGate(reg.position.x - 9, reg.position.y - 25, 20, 0);\n            const choice = new ChoiceGate(reg.position.x + 9, reg.position.y - 60, 12);\n            reg.inputWires.push(new Wire(or, 0), new Wire(choice, 0));\n\n            const wirePath = [\n                {x: reg.position.x - 13, y: choice.position.y},\n                {x: reg.position.x - 13, y: startNot.position.y},\n            ];\n            or.inputWires.push(new Wire(startNot, 0, wirePath, {color: \"rgba(100, 100, 130, 0.75)\"}));\n            or.inputWires.push(new Wire(clockNot, 0, [\n                {x: or.position.x + 10, y: or.position.y - 18 - i/2},\n                {x: clockNot.position.x - 40, y: or.position.y - 18 - i},\n            ], tealFaded));\n\n            // choice gate is [0] ? [1] : [2]\n            // the selection comes first\n            choice.inputWires.push(new Wire(startNot, 0, wirePath, {color: \"rgba(100, 100, 130, 0.75)\"}));\n\n            // If the clock is off, the registers need to use the input bits\n            choice.inputWires.push(new Wire(inputB[i], 0));\n            // Otherwise hold\n            choice.inputWires.push(new Wire(multiplierRegister[i+1] || null, 0, [\n                {x: reg.position.x + 15, y: reg.position.y - 80},\n                {x: reg.position.x - 22, y: reg.position.y - 80},\n                {x: reg.position.x - 22, y: reg.position.y + 10},\n            ]));\n\n            this.components.push(or, choice);\n        }\n\n        // Control Wire from the final register bit to the adder's output\n        const regLSB = multiplierRegister[0];\n        for (let i = 0; i <= BITS; i++) {\n            const choice = adderChoiceGates[i];\n            // Selector Wire\n            choice.inputWires.unshift(new Wire(regLSB, 0, [\n                {x: choice.position.x - 13, y: choice.position.y},\n                {x: choice.position.x - 13, y: choice.position.y - 20},\n                {x: 400, y: choice.position.y - 20},\n                {x: 400, y: regLSB.position.y + 20},\n                {x: regLSB.position.x, y: regLSB.position.y + 20},\n            ], {color: \"rgb(127, 127, 127)\"}));\n\n            // Else wire\n            const outBit = productRegister[i + BITS];\n            choice.inputWires.push(new Wire(outBit, 0, [\n                {x: choice.position.x + 4, y: choice.position.y - 10},\n                {x: choice.position.x + 11, y: choice.position.y - 10},\n                {x: outBit.position.x + 18, y: 305 + 2*i},\n                {x: outBit.position.x + 18, y: outBit.position.y - 18},\n            ], purpleFaded));\n        }\n\n        // Answer Register\n        const finalAnswer: RegisterBit[] = [];\n        for (let i = 0; i <= 2*BITS; i++) {\n            const offset = 5;\n            const bit = new RegisterBit(productRegister[i].position.x + offset, 530, 30);\n            this.components.push(bit);\n            this.outputComponents.push(bit);\n\n            // set wire: on at the 12th clock cycle\n            bit.inputWires.push(new Wire(countdown, 12, [\n                {x: bit.position.x - 15, y: bit.position.y - 15},\n                {x: bit.position.x - 15, y: bit.position.y - 30},\n                {x: 780, y: bit.position.y - 30},\n                {x: 780, y: countdown.position.y + 40},\n                {x: countdown.position.x + countdown.outputSockets[12].x, y: countdown.position.y + 40},\n            ], {color: \"rgb(128, 128, 128)\"}));\n\n            // what wire: from the corresponding from the product \"register\"\n            const from = productRegister[i];\n            const diagonal = 16;\n            bit.inputWires.push(new Wire(from, 0, [\n                {x: bit.position.x + diagonal, y: bit.position.y - diagonal},\n                {x: from.position.x + diagonal + offset, y: from.position.y + diagonal + offset},\n            ]));\n\n            finalAnswer.push(bit);\n        }\n\n        // finally, add displays\n        const displayA = new Display(245, 25, inputA, false, 30);\n        const displayB = new Display(510, 20, inputB, false, 30);\n        const displayEnd = new Display(400, 575, finalAnswer, false, 48);\n        displayEnd.size.x = 2*displayEnd.size.y;\n\n        // rendering trick, because input wires are drawn with a component\n        // so pushing these last makes them render last so it looks cleaner\n        this.components.push(adder, countdown, startButton, displayA, displayB, displayEnd);\n    }\n\n    afterRender = () => {\n        const ctx = this.context;\n\n        const cycle = this.countdown.state.clock;\n        if (cycle >= 0) {\n            const n = 5 - ((cycle + 1) >> 1);\n            if (n >= 0) {\n                ctx.fillStyle = \"rgba(255,255,255,0.75)\";\n                const west = (this.regRight - this.regSpacing * n) - 20;\n                const north = 340, south = 480;\n                const east = (this.regRight) + 22;\n                ctx.beginPath();\n                ctx.moveTo(west, north);\n                ctx.lineTo(east, north);\n                ctx.lineTo(east, south);\n                ctx.lineTo(west, south);\n                ctx.fill();\n            }\n        }\n\n        if (cycle == 2*this.numBits + 1) {\n            this.startButton.state.active = false;\n            this.startButton.state.bits = [false];\n        }\n    }\n}\n\nexport default MultiplierExploration;\n","// SubtractorExploration.ts\n\nimport Exploration from './Exploration';\nimport InputBit from './InputBit';\nimport OutputBit from './OutputBit';\nimport Subtractor from './Subtractor';\nimport Wire from './Wire';\nimport Display from './Display';\n\nclass SubtractorExploration extends Exploration {\n    constructor(canvas: HTMLCanvasElement) {\n        super(canvas);\n\n        const subtractor = new Subtractor(200, 200, 4);\n        this.components.push(subtractor);\n\n        for (let i = 0; i < 4; i++) {\n            const bit = new InputBit(40 + i*40, 30);\n            subtractor.inputWires.unshift(new Wire(bit, 0, [\n                {x: 112.5 + i*25, y: 120 - i*20},\n                {x: 40 + i*40, y: 120 - i*20},\n            ]));\n            this.components.push(bit);\n\n            const bit2 = new InputBit(360 - i*40, 40);\n            subtractor.inputWires.push(new Wire(bit2, 0, []));\n            this.components.push(bit2);\n        }\n        const outputBits = [];\n        for (let i = 0; i < 5; i++) {\n            const output = new OutputBit(245 - i*30, 300);\n            output.inputWires.push(new Wire(subtractor, i, []));\n            outputBits.push(output);\n        }\n        this.outputComponents.push(...outputBits);\n        this.components.push(...outputBits);\n\n        this.components.push(new Display(200, 330, outputBits, true));\n    }\n}\n\nexport default SubtractorExploration;\n","\nimport Exploration from './Exploration';\n//import TestExploration from './TestExploration';\nimport AdderExploration from './AdderExploration';\nimport ChoiceExploration from './ChoiceExploration';\nimport ClockExploration from './ClockExploration';\nimport DividerExploration from './DividerExploration';\nimport MultiplierExploration from './MultiplierExploration';\nimport RegisterExploration from './RegisterExploration';\nimport SubtractorExploration from './SubtractorExploration';\n\nfunction createCanvas(): HTMLCanvasElement {\n    const canvas: HTMLCanvasElement = document.createElement(\"canvas\");\n    return canvas;\n}\n\n// in milliseconds\nconst UPDATE_TIMES = [4000, 2500, 1600, 1000, 630, 400, 250]\n\nfunction createExploration(id: string, type: typeof Exploration): Exploration {\n    const element = document.getElementById(id);\n    if (!element) {\n        throw new Error(\"Document element \" + id + \" not found.\");\n    }\n\n    const canvas = createCanvas();\n    element.appendChild(canvas);\n\n    const exploration = new type(canvas);\n    exploration.update();\n    canvas.addEventListener(\"click\", function(event) {\n        exploration.onClick(event.offsetX, event.offsetY);\n    });\n\n    const controls = document.createElement(\"div\");\n    controls.innerHTML = `\n        <form>\n            <p><strong>Speed:</strong> Slow\n                <input id=\"speed-${id}\" name=\"speed\" type=\"range\" min=\"0\" max=\"${UPDATE_TIMES.length - 1}\" />\n                Fast\n            </p>\n        </form>\n        <button id=\"pause-${id}\">Pause</button>\n        <button id=\"resume-${id}\">Resume</button>\n        <button id=\"step-${id}\">Step</button>\n    `;\n    controls.querySelector(\"#speed-\" + id)!.addEventListener(\"change\", function(event) {\n        exploration.updateTime = UPDATE_TIMES[Number((event.target as HTMLInputElement).value)];\n    });\n    element.appendChild(controls);\n\n    controls.querySelector(\"#pause-\" + id)!.addEventListener(\"click\", exploration.pause.bind(exploration));\n    controls.querySelector(\"#resume-\" + id)!.addEventListener(\"click\", exploration.resume.bind(exploration));\n    controls.querySelector(\"#step-\" + id)!.addEventListener(\"click\", exploration.update.bind(exploration));\n\n    exploration.resume();\n\n    return exploration;\n}\n\n\n// Explorations\nlet ALL_EXPLORATIONS: Exploration[] = [];\nALL_EXPLORATIONS.push(createExploration('adder', AdderExploration));\nALL_EXPLORATIONS.push(createExploration('subtractor', SubtractorExploration));\n//ALL_EXPLORATIONS.push(createExploration('choice', ChoiceExploration));\n//ALL_EXPLORATIONS.push(createExploration('clock', ClockExploration));\n\nALL_EXPLORATIONS.push(createExploration('multiplier-full', MultiplierExploration));\nALL_EXPLORATIONS.push(createExploration('divider-full', DividerExploration));\n//ALL_EXPLORATIONS.push(createExploration('3', RegisterExploration));\n\nfunction renderLoop() {\n    // TODO: Put this in exploration\n    for (let i = 0; i < ALL_EXPLORATIONS.length; i++) {\n        const exploration = ALL_EXPLORATIONS[i];\n        exploration.render();\n    }\n    requestAnimationFrame(renderLoop);\n}\nrenderLoop();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}