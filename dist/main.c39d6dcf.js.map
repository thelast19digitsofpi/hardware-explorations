{"version":3,"sources":["Exploration.ts","Wire.ts","ChoiceGate.ts","InputBit.ts","OutputBit.ts","Gates.ts","ChoiceExploration.ts","RegisterBit.ts","Adder.ts","MultiplierExploration.ts","main.ts","../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.c39d6dcf.js","sourceRoot":"../src","sourcesContent":["// Exploration.ts\n//\n// This might be something a little more interesting\n\nimport Component, {StateObject} from './Component';\n\nclass Exploration {\n    public canvas: HTMLCanvasElement;\n    public context: CanvasRenderingContext2D;\n    public components: Array<Component>;\n    // The idea is that all components update their state recursively starting here\n    public outputComponents: Array<Component>;\n\n    public paused: boolean = false;\n    public updateTime: number = 1000;\n    public lastUpdated: number = Date.now();\n    public animationFrame: any;\n\n    constructor(canvas: HTMLCanvasElement) {\n        this.canvas = canvas;\n        this.context = canvas.getContext('2d')!;\n        this.components = [];\n        this.outputComponents = [];\n\n        // TS-safe way of putting a random debug name\n        let id = Math.floor(Math.random() * 1e6);\n        Object.defineProperty(window, \"exploration\" + id, {\n            value: this,\n        });\n        console.log(id, this);\n    }\n\n    // todo: addComponent() maybe?\n\n    render() {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        for (let i = 0; i < this.components.length; i++) {\n            this.context.save();\n            // render wires first\n            const comp = this.components[i];\n            for (let j = 0; j < comp.inputWires.length; j++) {\n                const position = {\n                    x: comp.position.x + comp.inputSockets[j].x,\n                    y: comp.position.y + comp.inputSockets[j].y,\n                };\n                comp.inputWires[j]?.render(this.context, position);\n            }\n            this.components[i].render(this.context);\n            this.context.restore();\n        }\n    }\n\n    onClick(canvasX: number, canvasY: number) {\n        for (let i = 0; i < this.components.length; i++) {\n            const component = this.components[i];\n            const offsetX = canvasX - component.position.x;\n            const offsetY = canvasY - component.position.y;\n            if (Math.abs(offsetX) < component.size.x/2 && Math.abs(offsetY) < component.size.y/2) {\n                component.onClick(offsetX, offsetY);\n            }\n        }\n\n        // Right now I have nothing better than re-updating the whole tree\n        this.update();\n    }\n\n    pause() {\n        this.paused = true;\n        cancelAnimationFrame(this.animationFrame);\n    }\n\n    resume() {\n        this.paused = false;\n        this.animationFrame = requestAnimationFrame(this.updateLoop.bind(this));\n    }\n\n    updateLoop() {\n        // Not paused or turned off, and been long enough since last update\n        if (!this.paused && this.updateTime > 0 && Date.now() - this.lastUpdated > this.updateTime) {\n            this.update();\n\n            this.animationFrame = requestAnimationFrame(this.updateLoop.bind(this));\n        }\n    }\n\n    update() {\n        // Recursively loop backwards through the tree\n        // stores a hash of component indices because we have to check the same component multiple times\n        // We hash anything that is listed as an output component\n\n        const visitedNodes: {[i: number]: boolean} = {};\n        const savedState = [];\n        for (let i = 0; i < this.outputComponents.length; i++) {\n            const comp = this.outputComponents[i];\n            let old: boolean[] = [];\n            for (let j = 0; j < comp.state.bits.length; j++) {\n                old.push(comp.state.bits[j]);\n            }\n            savedState.push({bits: old});\n        }\n        for (let i = 0; i < this.outputComponents.length; i++) {\n            this.updateComponent(this.outputComponents[i], visitedNodes, savedState);\n        }\n\n        for (let i = 0; i < this.outputComponents.length; i++) {\n            console.log(\"After Update: \", this.outputComponents[i].position, savedState[i].bits, this.outputComponents[i].state.bits)\n        }\n\n        console.warn(\"UPDATE FINISHED\");\n\n        this.lastUpdated = Date.now();\n    }\n\n    updateComponent(component: Component,\n        visitedNodes: {[i: number]: boolean},\n        savedState: StateObject[]) {\n        let index = this.components.indexOf(component); // if this gets too slow I can add IDs\n        if (!visitedNodes[index]) {\n            visitedNodes[index] = true; // prevents infinite loops, although cyclic explorations are invalid anyway\n            // has not been visited, so we need to evaluate it\n            //console.log(\"visiting \" + String(index), component);\n            let parentBits = [];\n            for (let i = 0; i < component.inputWires.length; i++) {\n                const wire = component.inputWires[i];\n                if (wire) {\n                    const to = wire.toComponent;\n                    if (!to) {\n                        parentBits.push(false); // null = 0\n                    } else {\n                        this.updateComponent(wire.toComponent, visitedNodes, savedState);\n\n\n                        // all we need is this one bit\n                        // (note: null or missing wires give a 0)\n                        // did we save it?\n                        const ocIndex = this.outputComponents.indexOf(to);\n                        if (ocIndex >= 0) {\n                            //console.log(\"Using saved state\", ocIndex, savedState[ocIndex].bits);\n                            // Use the stored state instead of updating immediately\n                            parentBits.push(savedState[ocIndex].bits[wire.toOutput]);\n                        } else {\n                            parentBits.push(to.state.bits[wire.toOutput]);\n                        }\n                    }\n                } else {\n                    // no wire = 0\n                    parentBits.push(false);\n                }\n            }\n            // Update the component's state.\n            component.state.bits = component.evaluate(parentBits);\n        }\n    }\n};\n\nexport default Exploration;\n","// Wire.ts\n\nimport Component from \"./Component\"\n\ntype WireOptions = {color?: string};\n\n// not sure a wire really is a component but it uses them\nclass Wire {\n    // I use \"from\" and \"to\" because \"input\" and \"output\" are ambiguous\n    toComponent: Component;\n    toOutput: number;\n\n    color: string;\n\n    // in case you want the wire to bend\n    waypoints: Array<{x: number, y: number}> = [];\n\n    constructor(\n        to: Component,\n        toOutput: number,\n        waypoints: {x: number, y: number}[] = [],\n        options: WireOptions = {}\n    ) {\n        this.toComponent = to;\n        this.toOutput = toOutput;\n        this.waypoints = waypoints;\n\n        this.color = options.color ?? \"#333\";\n    }\n\n    get(): boolean {\n        // empty wire is zero\n        if (!this.toComponent) return false;\n        // coerce undefined to false\n        return this.toComponent.state.bits[this.toOutput] || false;\n    }\n\n    addWaypoint(x: number, y: number) {\n        this.waypoints.push({x: x, y: y});\n    }\n\n    render(ctx: CanvasRenderingContext2D, from: {x: number, y: number}) {\n        if (!this.toComponent) return;\n        ctx.save();\n        ctx.strokeStyle = this.color;\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.moveTo(from.x, from.y);\n        for (let i = 0; i < this.waypoints.length; i++) {\n            ctx.lineTo(this.waypoints[i].x, this.waypoints[i].y);\n        }\n        const endOffset = this.toComponent.outputSockets[this.toOutput];\n        ctx.lineTo(endOffset.x + this.toComponent.position.x, endOffset.y + this.toComponent.position.y);\n        ctx.stroke();\n        ctx.restore();\n    }\n}\n\nexport default Wire;\n","// RegisterBit.ts\n//\n// Has an \"on\" input and an \"off\" input.\n// Does nothing if both are on or both are off.\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass ChoiceGate implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, size: number = 30) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: size*2,\n            y: size,\n        };\n\n        this.state = {\n            bits: [false],\n        };\n        const offset = size * 0.44;\n        this.inputSockets = [\n            {x: -this.size.x * 1/3, y: 0},\n            {x: -offset, y: -this.size.y/2},\n            {x: +offset, y: -this.size.y/2}\n        ];\n\n        this.outputSockets = [\n            {x: 0, y: size/2},\n        ];\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        ctx.translate(left, top);\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.beginPath();\n        ctx.moveTo(0, 0);\n        ctx.lineTo(this.size.x*1.0, 0);\n        ctx.lineTo(this.size.x*0.67, this.size.y);\n        ctx.lineTo(this.size.x*0.33, this.size.y);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        // red input\n\n        ctx.restore();\n    }\n    // If the \"set\" input is on, change to the \"what\" input\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] ? bits[1] : bits[2]];\n    }\n}\n\nexport default ChoiceGate;\n","// InputBit.ts\n// Can be clicked to change state\n\nimport Component from './Component';\n\nclass InputBit implements Component {\n    state: {bits: boolean[], active: boolean};\n    position: { x: number; y: number; };\n    size: { x: number; y: number; };\n    inputSockets: [];\n    inputWires: [];\n    outputSockets: {x: number, y: number}[];\n\n    constructor(x: number, y: number, value: boolean = false, size: number = 20) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n        this.size = {\n            x: size,\n            y: size,\n        };\n\n        this.state = {\n            active: value,\n            bits: [value],\n        };\n\n        this.inputSockets = []; // it is input, it needs no input from elsewhere\n        this.inputWires = [];\n        this.outputSockets = [\n            {x: 0, y: 0}\n        ];\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        if (this.state.active !== this.state.bits[0]) {\n            // panic\n            throw new Error(\"[InputBit.render] State does not match bit array\");\n        }\n        ctx.fillStyle = (this.state.active ? \"#33ff33\" : \"#990000\");\n        ctx.strokeStyle = \"2px solid black\";\n        ctx.beginPath();\n        ctx.arc(this.position.x, this.position.y, this.size.x / 2, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.stroke();\n    };\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        console.log(\"[InputBit] clicked\");\n        this.state.active = !this.state.active;\n        this.state.bits[0] = this.state.active;\n        // bits will be updated when everything is\n    };\n\n    evaluate(_: boolean[]): boolean[] {\n        return [this.state.active];\n    }\n}\n\nexport default InputBit;\n","// OutputBit.ts\n// Need a good way to distinguish from InputBits\n\nimport Component from './Component';\nimport Wire from './Wire';\n\nclass OutputBit implements Component {\n    state: { bits: boolean[] };\n    position: { x: number; y: number; };\n    size: { x: number; y: number; };\n    inputSockets: { x: number; y: number; }[];\n    outputSockets: { x: number; y: number; }[];\n    inputWires: Wire[];\n\n    constructor(x: number, y: number, size: number = 20) {\n        this.position = { x: x, y: y };\n        this.size = { x: size, y: size };\n        this.state = { bits: [false] };\n\n        this.inputSockets = [{x: 0, y: 0}];\n        // this might be convenient\n        this.outputSockets = [{x: 0, y: 0}];\n        this.inputWires = [];\n    }\n    render(ctx: CanvasRenderingContext2D): void {\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        ctx.fillStyle = \"black\";\n        ctx.fillRect(left, top, this.size.x, this.size.y);\n        ctx.fillStyle = (this.state.bits[0] ? \"#33ff33\" : \"#990000\");\n        ctx.fillRect(\n            left + this.size.x * 0.1,\n            top + this.size.y * 0.1,\n            this.size.x * 0.8,\n            this.size.y * 0.8\n        );\n    };\n    onClick(offsetX: number, offsetY: number): void {\n        return;\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        //console.log(bits);\n        //console.log(\"evaluating\", this.position);\n        return bits;\n    };\n}\n\nexport default OutputBit;\n","// Gates.ts\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nabstract class Gate implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    public rotation: number;\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, size: number, rotation: number, bits: number) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: size,\n            y: size\n        };\n\n        this.state = {\n            bits: [false],\n        };\n\n        this.rotation = rotation * Math.PI / 180;\n\n        const cosine = Math.cos(this.rotation);\n        const sine = Math.sin(this.rotation);\n        // transform [0.3, -0.5]\n        if (bits == 2) {\n            this.inputSockets = [\n                {\n                    x: size * (-0.2*cosine + 0.5*sine),\n                    y: size * (-0.5*cosine - 0.2*sine),\n                },\n                {\n                    x: size * (0.2*cosine + 0.5*sine),\n                    y: size * (-0.5*cosine + 0.2*sine)\n                }\n            ];\n        } else {\n            this.inputSockets = [{\n                x: size * 0.5*sine,\n                y: size * -0.5*cosine,\n            }]\n        }\n\n        this.outputSockets = [\n            {\n                x: size * -0.4*sine,\n                y: size * 0.4*cosine,\n            }\n        ];\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    abstract drawGate(ctx: CanvasRenderingContext2D): void;\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.strokeStyle = \"black\";\n        ctx.lineWidth = 2;\n        ctx.translate(this.position.x, this.position.y);\n        ctx.rotate(this.rotation);\n        // draw the wires coming in\n        ctx.beginPath();\n        if (this.inputSockets.length === 2) {\n            ctx.moveTo(this.size.x * -0.2, this.size.y * -0.5);\n            ctx.lineTo(this.size.x * -0.2, 0);\n            ctx.moveTo(this.size.x * 0.2, this.size.y * -0.5);\n            ctx.lineTo(this.size.x * 0.2, 0);\n            ctx.stroke();\n        }\n\n        this.drawGate(ctx);\n\n        ctx.restore();\n    }\n\n    abstract evaluate(bits: boolean[]): boolean[];\n}\n\nclass AndGate extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 2);\n    }\n    drawGate(ctx: CanvasRenderingContext2D) {\n        ctx.beginPath();\n        ctx.moveTo(this.size.x * 0.4, -this.size.y * 0.4);\n        ctx.lineTo(this.size.x * 0.4, 0);\n        ctx.arc(0, 0, this.size.x * 0.4, 0, Math.PI);\n        ctx.lineTo(-this.size.x * 0.4, -this.size.y * 0.4);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] && bits[1]];\n    };\n}\n\nclass OrGate extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 2);\n    }\n    drawGate(ctx: CanvasRenderingContext2D) {\n        const s = this.size.x;\n        ctx.beginPath();\n        ctx.moveTo(s * 0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0.4, s * 0.1, 0, s * 0.4);\n        ctx.quadraticCurveTo(s * -0.4, s * 0.1, s * -0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0, s * -0.2, s * 0.4, s * -0.4);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] || bits[1]];\n    };\n}\n\nclass XorGate extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 2);\n    }\n    drawGate(ctx: CanvasRenderingContext2D) {\n        const s = this.size.x;\n        // do the or's path...\n        ctx.beginPath();\n        ctx.moveTo(s * 0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0.4, s * 0.1, 0, s * 0.4);\n        ctx.quadraticCurveTo(s * -0.4, s * 0.1, s * -0.4, s * -0.4);\n        ctx.quadraticCurveTo(s * 0, s * -0.2, s * 0.4, s * -0.4);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n        // and the extra thing\n        ctx.beginPath();\n        ctx.moveTo(s * -0.4, s * -0.5);\n        ctx.quadraticCurveTo(s * 0, s * -0.3, s * 0.4, s * -0.5);\n        ctx.stroke();\n    };\n    evaluate(bits: boolean[]): boolean[] {\n        return [bits[0] !== bits[1]];\n    };\n}\n// Doesn't extend Gate because it only has 1 input and is smaller\nclass Not extends Gate {\n    constructor(x: number, y: number, size: number, degrees: number) {\n        super(x, y, size, degrees, 1);\n    }\n\n    drawGate(ctx: CanvasRenderingContext2D) {\n        const s = this.size.y;\n        // wire in\n        ctx.beginPath();\n        ctx.moveTo(0, s * -0.5);\n        ctx.lineTo(0, 0);\n        ctx.stroke();\n        // triangle for the not\n        ctx.beginPath();\n        ctx.moveTo(0, s * 0.2);\n        ctx.lineTo(s * -0.25, s * -0.35);\n        ctx.lineTo(s * 0.25, s * -0.35);\n        ctx.closePath();\n        ctx.stroke();\n        ctx.fill();\n\n        ctx.beginPath();\n        ctx.arc(0, s * 0.3, s * 0.1, 0, 2*Math.PI);\n        ctx.stroke();\n        ctx.fill();\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        Gate.prototype.render.call(this, ctx);\n    };\n    onClick(offsetX: number, offsetY: number) {};\n    evaluate(bits: boolean[]): boolean[] {\n        return [!bits[0]];\n    };\n}\n\nexport {AndGate, OrGate, XorGate, Not};\n","// ChoiceExploration\n//\n// Exploration that shows how a multiplexer works.\n// I called it a \"choice gate\" because \"multiplexer\" and \"multiplier\" look too similar.\n\nimport Exploration from './Exploration';\nimport Wire from './Wire';\nimport ChoiceGate from './ChoiceGate';\nimport InputBit from './InputBit';\nimport OutputBit from './OutputBit';\nimport {AndGate, OrGate, XorGate, Not} from './Gates';\n\nclass ChoiceExploration extends Exploration {\n    constructor(canvas: HTMLCanvasElement) {\n        super(canvas);\n\n        const inputChoice = new InputBit(50, 100);\n        const inputElse = new InputBit(100, 100);\n        const inputIf = new InputBit(150, 100);\n        this.components.push(inputChoice, inputIf, inputElse);\n\n        const inverter = new Not(50, 150, 30, 0);\n        this.components.push(inverter);\n        inverter.inputWires.push(new Wire(inputChoice, 0));\n\n        // recursive components are a bit weird\n        const andIf = new AndGate(140, 170, 50, 0);\n        const andElse = new AndGate(80, 200, 50, 0);\n        const or = new OrGate(100, 250, 50, 0);\n\n        andIf.inputWires = [\n            new Wire(inputChoice, 0, [\n                {x: 130, y: 125},\n                {x: 50, y: 125},\n            ]),\n            new Wire(inputIf, 0, [])\n        ];\n        andElse.inputWires = [\n            new Wire(inverter, 0, [\n                {x: 70, y: 170},\n                {x: 50, y: 170},\n            ]),\n            new Wire(inputElse, 0, [\n                {x: 90, y: 170},\n                {x: 100, y: 170},\n            ]),\n        ];\n        or.inputWires = [\n            new Wire(andElse, 0, []),\n            new Wire(andIf, 0, []),\n        ];\n        this.components.push(andIf, andElse, or);\n\n\n        const output = new OutputBit(100, 300);\n        output.inputWires.push(new Wire(or, 0))\n        this.components.push(output);\n        this.outputComponents.push(output);\n\n        // the simplified version\n        const inputChoice2 = new InputBit(250, 150);\n        const inputIf2 = new InputBit(300, 150);\n        const inputElse2 = new InputBit(350, 150);\n        const choice = new ChoiceGate(300, 200, 40);\n        const output2 = new OutputBit(300, 250);\n        choice.inputWires.push(new Wire(inputChoice2, 0));\n        choice.inputWires.push(new Wire(inputIf2, 0));\n        choice.inputWires.push(new Wire(inputElse2, 0));\n        output2.inputWires.push(new Wire(choice, 0));\n\n        this.components.push(inputChoice2, inputIf2, inputElse2, choice, output2);\n        this.outputComponents.push(output2);\n    }\n\n}\n\nexport default ChoiceExploration;\n","// RegisterBit.ts\n//\n// Has an \"on\" input and an \"off\" input.\n// Does nothing if both are on or both are off.\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass RegisterBit implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, size: number = 30) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: size,\n            y: size,\n        };\n\n        this.state = {\n            bits: [false],\n        };\n\n        // [0] is the off switch and [1] is the on switch\n        const offset = size * 0.44;\n        this.inputSockets = [\n            {x: -offset, y: -offset},\n            {x:  offset, y: -offset}\n        ];\n\n        this.outputSockets = [\n            {x: 0, y: size/2},\n        ];\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        ctx.translate(left, top);\n        // base\n        ctx.fillStyle = this.state.bits[0] ? \"#33ff33\" : \"#990000\";\n        ctx.beginPath();\n        ctx.moveTo(this.size.x*0.5, 0);\n        ctx.lineTo(this.size.x*1.0, this.size.y*0.5);\n        ctx.lineTo(this.size.x*0.5, this.size.y);\n        ctx.lineTo(this.size.x*0.0, this.size.y*0.5);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        // red input\n        ctx.fillStyle = \"#ccffff\";\n        ctx.beginPath();\n        ctx.arc(this.size.x * 0.25, this.size.y * 0.25, this.size.x * 0.25, 135*Math.PI/180, 315*Math.PI/180);\n        ctx.fill();\n        ctx.stroke();\n        /*ctx.fillStyle = \"#33ff33\";\n        ctx.beginPath();\n        ctx.arc(this.size.x * 0.75, this.size.y * 0.25, this.size.x * 0.25, -135*Math.PI/180, 45*Math.PI/180);\n        ctx.fill();\n        ctx.stroke();*/\n        if (this.inputWires[0] && this.inputWires[0].get()) {\n            ctx.beginPath();\n            ctx.moveTo(this.size.x * 0.75, this.size.y * 0.25);\n            ctx.lineTo(this.size.x * 1.0, 0);\n            ctx.stroke();\n        }\n\n        ctx.restore();\n    }\n    // If the \"set\" input is on, change to the \"what\" input\n    evaluate(bits: boolean[]): boolean[] {\n        return bits[0] ? [bits[1]] : this.state.bits;\n    }\n}\n\nexport default RegisterBit;\n","// Adder.ts\n\nimport Component from \"./Component\";\nimport Wire from \"./Wire\";\n\nclass Adder implements Component {\n    public state: {bits: boolean[]};\n    public position: {x: number, y: number};\n    public size: {x: number, y: number};\n    public inputSockets: {x: number, y: number}[];\n    public inputWires: Wire[];\n    public outputSockets: {x: number, y: number}[];\n    public numBits: number;\n\n    // bits=8 means an 8-bit plus 8-bit\n    constructor(x: number, y: number, bits: number, width: number = bits*50, height: number = width/2) {\n        this.position = {\n            x: x,\n            y: y,\n        };\n\n        this.size = {\n            x: width,\n            y: height,\n        };\n\n        this.state = {\n            bits: [],\n        };\n\n        this.numBits = bits;\n\n        this.inputSockets = [];\n        // spacing between the bits\n        const spacing = width / (2 * bits);\n        for (let i = 0; i < bits; i++) {\n            this.inputSockets.push({\n                x: -spacing * (i + 0.5) + width/2,\n                y: -this.size.y/2,\n            });\n            this.inputSockets.unshift({\n                x: spacing * (i + 0.5) - width/2,\n                y: -this.size.y/2,\n            });\n        }\n\n        this.outputSockets = [];\n        for (let i = 0; i < bits; i++) {\n            this.outputSockets.push({\n                x: -spacing * (i - (bits-1)/2),\n                y: this.size.y/2,\n            });\n        }\n        // carry\n        this.outputSockets.push({\n            x: -this.size.x*0.375,\n            y: 0,\n        });\n\n        this.inputWires = [];\n    }\n\n    onClick(_offsetX: number, _offsetY: number): void {\n        return;\n    };\n\n    render(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const left = this.position.x - this.size.x/2;\n        const top = this.position.y - this.size.y/2;\n        // base\n        ctx.fillStyle = \"#cccccc\";\n        ctx.beginPath();\n        ctx.moveTo(left,                    top);\n        ctx.lineTo(left + this.size.x,      top);\n        ctx.lineTo(left + this.size.x*0.75, top + this.size.y);\n        ctx.lineTo(left + this.size.x*0.25, top + this.size.y);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        for (let i = 0; i < this.inputSockets.length; i++) {\n            let socket = this.inputSockets[i];\n            ctx.fillStyle = \"#3333cc\";\n            ctx.beginPath();\n            ctx.arc(this.position.x + socket.x, this.position.y + socket.y, 6, 0, 2*Math.PI);\n            ctx.fill();\n            ctx.fillStyle = \"black\";\n            ctx.fillText(String(i), this.position.x + socket.x, this.position.y + socket.y - 15);\n        }\n\n        for (let i = 0; i < this.outputSockets.length; i++) {\n            let socket = this.outputSockets[i];\n            ctx.fillStyle = \"#333333\";\n            ctx.strokeStyle = (this.state.bits[i] ? '#33ff33' : '#990000');\n            ctx.lineWidth = 2;\n            ctx.beginPath();\n            ctx.arc(this.position.x + socket.x, this.position.y + socket.y, 6, 0, 2*Math.PI);\n            ctx.fill();\n            ctx.stroke();\n        }\n\n        let num1 = 0, num2 = 0;\n        for (let i = 0; i < this.numBits; i++) {\n            const wire1 = this.inputWires[i], wire2 = this.inputWires[i + this.numBits];\n            num1 += (wire1.toComponent.state.bits[wire1.toOutput] ? 1 : 0) * (1 << i);\n            num2 += (wire2.toComponent.state.bits[wire2.toOutput] ? 1 : 0) * (1 << i);\n        }\n        const textSize = Math.round(Math.min(this.size.x * 0.125, this.size.y * 0.5));\n        ctx.font = textSize + \"px monospace\";\n        ctx.fillStyle = \"black\";\n        ctx.fillText(String(num1) + \" + \" + String(num2), this.position.x, this.position.y);\n\n        ctx.restore();\n    }\n\n    evaluate(bits: boolean[]): boolean[] {\n        let num1 = 0, num2 = 0;\n        // cheating here but that's not the point\n        for (let i = 0; i < this.numBits; i++) {\n            num1 += Number(bits[i]) * (1 << i);\n            num2 += Number(bits[i + this.numBits]) * (1 << i);\n        }\n\n        const answer = num1 + num2;\n        let answerBits = Array(this.numBits + 1);\n        for (let i = 0; i <= this.numBits; i++) {\n            answerBits[i] = (answer & (1 << i)) > 0;\n        }\n        //console.log(answerBits);\n        return answerBits;\n    }\n}\n\nexport default Adder;\n","// MultiplierExploration.ts\n\nimport Exploration from './Exploration';\nimport InputBit from './InputBit';\nimport OutputBit from './OutputBit';\nimport RegisterBit from './RegisterBit';\nimport Adder from './Adder';\nimport Wire from './Wire';\nimport {AndGate, OrGate, XorGate, Not} from './Gates';\nimport ChoiceGate from './ChoiceGate';\n\nclass MultiplierExploration extends Exploration {\n    constructor(canvas: HTMLCanvasElement) {\n        super(canvas);\n\n        const BITS = 6;\n\n        const startButton = new InputBit(600, 40, false, 50);\n        const startNot = new Not(550, 40, 30, 90);\n        startNot.inputWires.push(new Wire(startButton, 0));\n        this.components.push(startNot);\n\n        const clockX = 595;\n\n        const clockAnd = new AndGate(clockX, 100, 25, 0);\n        const clockNot = new Not(clockX, 150, 25, 0);\n        const clockBit = new OutputBit(clockX, 200);\n\n\n        clockAnd.inputWires.push(new Wire(clockNot, 0, [\n            {x: clockX - 5, y: 75},\n            {x: clockX - 20, y: 75},\n            {x: clockX - 20, y: 175},\n            {x: clockX, y: 175}\n        ]));\n        clockAnd.inputWires.push(new Wire(startButton, 0));\n        clockBit.inputWires.push(new Wire(clockNot, 0));\n        clockNot.inputWires.push(new Wire(clockAnd, 0));\n        this.components.push(clockAnd, clockNot, clockBit);\n        this.outputComponents.push(clockBit);\n\n        const adder = new Adder(160, 190, BITS, 210, 90);\n\n        // The \"Register\" that really isn't.\n        // The Add and Shift steps should be successfully separated...\n        let productRegister = [];\n        for (let i = 0; i < 2*BITS+1; i++) {\n            const reg = new OutputBit(600 - 45*i, 400, 20);\n            productRegister.push(reg);\n            this.outputComponents.unshift(reg); // todo: is needed?\n            this.components.push(reg);\n        }\n\n        // Wire Coloring\n        const purple = {color: \"rgb(128, 32, 128)\"};\n        const purpleFaded = {color: \"rgba(128, 0, 128, 0.25)\"};\n        const teal = {color: \"rgb(0, 128, 128)\"};\n        const tealFaded = {color: \"rgba(0, 128, 128, 0.25)\"};\n\n        // Wires from the registers to the adder.\n        for (let i = 0; i < BITS; i++) {\n            const d = 3;\n            const bit = productRegister[i + BITS];\n            // basically, we want the most significant bit to be highest\n            const y1 = bit.position.y + 20 + d * (BITS - i);\n            adder.inputWires.push(new Wire(bit, 0, [\n                {x: adder.position.x + adder.inputSockets[i].x, y: 110 + d*i},\n                {x: 10 + d*i, y: 110 + d*i},\n                {x: 10 + d*i, y: y1},\n                {x: bit.position.x, y: y1},\n            ], {color: \"rgba(128, 0, 128, 0.75)\"}));\n        }\n\n        // And Gates coming out of the adder (for the clock).\n        let adderAndGates = [];\n        for (let i = 0; i <= BITS; i++) {\n            // and gate\n            const x = adder.position.x + adder.outputSockets[i].x;\n            const y = adder.position.y + adder.outputSockets[0].y; // put them all on the same line\n            // space them a bit\n            const and = new AndGate(x + 4 * ((BITS - 1)/2 - i), y + 40, 20, 0);\n            and.inputWires.push(new Wire(adder, i));\n            adderAndGates.push(and);\n            this.components.push(and);\n        }\n\n        // Shifting the Multiplication Register\n        for (let i = 0; i < 2*BITS + 1; i++) {\n            const regBit = productRegister[i];\n            const or = new OrGate(regBit.position.x, regBit.position.y - 30, 20, 0);\n            this.components.push(or);\n            regBit.inputWires.push(new Wire(or, 0));\n\n            const and1 = new AndGate(regBit.position.x - 10, regBit.position.y - 60, 20, 0);\n            and1.inputWires.push(new Wire(clockNot, 0, [\n                {x: regBit.position.x + 6, y: regBit.position.y - 100},\n                {x: 540 - 2*i, y: regBit.position.y - 110 - 1*i},\n            ], tealFaded));\n            // Shifting\n            if (i < 2*BITS) {\n                and1.inputWires.push(new Wire(productRegister[i+1], 0, [\n                    {x: regBit.position.x - 6, y: regBit.position.y - 80},\n                    {x: regBit.position.x - 21, y: regBit.position.y - 80},\n                    {x: regBit.position.x - 21, y: regBit.position.y},\n                ], teal));\n            }\n            const and2 = new AndGate(regBit.position.x + 10, regBit.position.y - 60, 20, 0);\n            and2.inputWires.push(new Wire(clockAnd, 0, [\n                {x: regBit.position.x + 6, y: regBit.position.y - 100},\n                {x: 540 - 2*i, y: regBit.position.y - 110 - 1*i},\n            ], purpleFaded));\n            this.components.push(and1, and2);\n\n            if (i >= BITS) {\n                // Upper Half of the Register: Connect to the adder.\n                and2.inputWires.push(new Wire(adderAndGates[i - BITS], 0, [], purple));\n            } else {\n                // Lower Half of the Register: Connect to itself.\n                and2.inputWires.push(new Wire(regBit, 0, [\n                    {x: regBit.position.x + 14, y: regBit.position.y - 75},\n                    {x: regBit.position.x + 21, y: regBit.position.y - 75},\n                    {x: regBit.position.x + 21, y: regBit.position.y},\n                ], purple));\n            }\n\n            or.inputWires.push(new Wire(and1, 0));\n            or.inputWires.push(new Wire(and2, 0));\n        }\n\n        // Input Numbers (A and B).\n        let inputA = [];\n        let inputB = [];\n        for (let i = 0; i < BITS; i++) {\n            const input = new InputBit(270 - i*25, 60);\n            this.components.push(input);\n            adder.inputWires.push(new Wire(input, 0));\n            inputA.push(input); // in case we need it\n        }\n        for (let i = 0; i < BITS; i++) {\n            const input = new InputBit(540 - i*45, 60);\n            this.components.push(input);\n            inputB.push(input);\n        }\n\n        // The second input register that is actually a register.\n        let multiplierRegister: RegisterBit[] = [];\n        let multiplierRegisterChoice = [];\n        for (let i = 0; i < BITS; i++) {\n            const reg = new RegisterBit(inputB[i].position.x - 4, 170, 20);\n            multiplierRegister.push(reg);\n            this.components.push(reg);\n            this.outputComponents.push(reg);\n        }\n        // Wiring to the Registers\n        for (let i = 0; i < BITS; i++) {\n            const reg = multiplierRegister[i];\n            const or = new OrGate(reg.position.x - 9, reg.position.y - 25, 20, 0);\n            const choice = new ChoiceGate(reg.position.x + 9, reg.position.y - 60, 12);\n            reg.inputWires.push(new Wire(or, 0), new Wire(choice, 0));\n\n            const wirePath = [\n                {x: reg.position.x - 13, y: choice.position.y},\n                {x: reg.position.x - 13, y: startNot.position.y},\n            ];\n            or.inputWires.push(new Wire(startNot, 0, wirePath, {color: \"rgba(100, 100, 130, 0.75)\"}));\n            or.inputWires.push(new Wire(clockNot, 0, [\n                {x: or.position.x + 10, y: or.position.y - 18 - i/2},\n                {x: clockNot.position.x - 40, y: or.position.y - 18 - i},\n            ], tealFaded));\n\n            // choice gate is [0] ? [1] : [2]\n            // the selection comes first\n            choice.inputWires.push(new Wire(startNot, 0, wirePath, {color: \"rgba(100, 100, 130, 0.75)\"}));\n\n            // If the clock is off, the registers need to use the input bits\n            choice.inputWires.push(new Wire(inputB[i], 0));\n            // Otherwise use the\n            choice.inputWires.push(new Wire(multiplierRegister[i+1] || null, 0, [\n                {x: reg.position.x + 14, y: reg.position.y - 80},\n                {x: reg.position.x - 22, y: reg.position.y - 80},\n                {x: reg.position.x - 22, y: reg.position.y + 10},\n            ]));\n\n            this.components.push(or, choice);\n        }\n\n        // Control Wire from the final register bit to the adder's output\n        const regLSB = multiplierRegister[0];\n        for (let i = 0; i < BITS; i++) {\n            const and = adderAndGates[i];\n            console.log(regLSB);\n            and.inputWires.push(new Wire(regLSB, 0, [\n                {x: and.position.x + 10, y: and.position.y - 20},\n                {x: 282, y: and.position.y - 20},\n                {x: 282, y: regLSB.position.y + 20},\n                {x: regLSB.position.x, y: regLSB.position.y + 20},\n            ], {color: \"rgb(127, 127, 127)\"}));\n        }\n\n        const testBit = new OutputBit(640, 100);\n        this.components.push(testBit);\n        this.outputComponents.push(testBit);\n        testBit.inputWires.push(new Wire(clockAnd, 0, [], purple));\n\n        // rendering trick, because input wires are drawn with a component\n        // so rendering these last makes it look cleaner\n        this.components.push(adder, startButton);\n    }\n}\n\nexport default MultiplierExploration;\n","\nimport Exploration from './Exploration';\n//import TestExploration from './TestExploration';\nimport AdderExploration from './AdderExploration';\nimport ChoiceExploration from './ChoiceExploration';\nimport MultiplierExploration from './MultiplierExploration';\nimport RegisterExploration from './RegisterExploration';\n\nfunction createCanvas(width: number, height: number): HTMLCanvasElement {\n    const canvas: HTMLCanvasElement = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\n\n// in milliseconds\nconst UPDATE_TIMES = [4000, 2500, 1600, 1000, 630, 400, 250]\n\nfunction createExploration(id: string, width: number, height: number, type: typeof Exploration): Exploration {\n    const element = document.getElementById(id);\n    if (!element) {\n        throw new Error(\"Document element \" + id + \" not found.\");\n    }\n\n    const canvas = createCanvas(width, height);\n    element.appendChild(canvas);\n\n    const exploration = new type(canvas);\n    exploration.update();\n    canvas.addEventListener(\"click\", function(event) {\n        exploration.onClick(event.offsetX, event.offsetY);\n    });\n\n    const controls = document.createElement(\"div\");\n    controls.innerHTML = `\n        <form>\n            <p><strong>Speed:</strong> Slow\n                <input id=\"speed-${id}\" name=\"speed\" type=\"range\" min=\"0\" max=\"${UPDATE_TIMES.length - 1}\" />\n                Fast\n            </p>\n        </form>\n        <button id=\"pause-${id}\">Pause</button>\n        <button id=\"resume-${id}\">Resume</button>\n        <button id=\"step-${id}\">Step</button>\n    `;\n    controls.querySelector(\"#speed-\" + id)!.addEventListener(\"change\", function(event) {\n        exploration.updateTime = UPDATE_TIMES[Number((event.target as HTMLInputElement).value)];\n    });\n    element.appendChild(controls);\n\n    controls.querySelector(\"#pause-\" + id)!.addEventListener(\"click\", exploration.pause.bind(exploration));\n    controls.querySelector(\"#resume-\" + id)!.addEventListener(\"click\", exploration.resume.bind(exploration));\n    controls.querySelector(\"#step-\" + id)!.addEventListener(\"click\", exploration.update.bind(exploration));\n\n    exploration.resume();\n\n    return exploration;\n}\n\n\n// Explorations\nlet ALL_EXPLORATIONS: Exploration[] = [];\n//ALL_EXPLORATIONS.push(createExploration('1', 640, 480, AdderExploration));\nALL_EXPLORATIONS.push(createExploration('choice', 400, 400, ChoiceExploration));\nALL_EXPLORATIONS.push(createExploration('multiplier-full', 640, 480, MultiplierExploration));\n//ALL_EXPLORATIONS.push(createExploration('3', 400, 400, RegisterExploration));\n\nfunction renderLoop() {\n    // TODO: Put this in exploration\n    for (let i = 0; i < ALL_EXPLORATIONS.length; i++) {\n        const exploration = ALL_EXPLORATIONS[i];\n        exploration.render();\n    }\n    requestAnimationFrame(renderLoop);\n}\nrenderLoop();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}